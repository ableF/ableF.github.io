<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="renderer" content="webkit"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.0.0-rc.0" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.0.0-rc.0" type="image/png" sizes="32x32"><meta name="description" content="è°ä¸æ˜¯ï¼Œæ‹¼äº†å‘½èµ°åˆ°ç”Ÿå‘½çš„ç»“å°¾">
<meta property="og:type" content="website">
<meta property="og:title" content="æ— åä¹‹è¾ˆ">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="æ— åä¹‹è¾ˆ">
<meta property="og:description" content="è°ä¸æ˜¯ï¼Œæ‹¼äº†å‘½èµ°åˆ°ç”Ÿå‘½çš„ç»“å°¾">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="å‰ç«¯ä¸€å²å°ç™½-able.Feng">
<meta name="twitter:card" content="summary"><meta name="keywords" content="å‰ç«¯ä¸€å²å°ç™½-able.Feng, æ— åä¹‹è¾ˆ"><meta name="description" content="è°ä¸æ˜¯ï¼Œæ‹¼äº†å‘½èµ°åˆ°ç”Ÿå‘½çš„ç»“å°¾"><title>æ— åä¹‹è¾ˆ</title><link ref="canonical" href="http://yoursite.com/index.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.0.0-rc.0"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":true},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 4.2.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">æ— åä¹‹è¾ˆ</div><div class="header-banner-info__subtitle"></div></div><div class="header-banner-arrow"><div class="header-banner-arrow__icon"><i class="fas fa-angle-down"></i></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content content-home" id="content"><section class="postlist"><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2022/03/25/TS%E5%AE%98%E6%96%B9%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%9E%8B/">TSå®˜æ–¹å·¥å…·ç±»å‹</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-03-25</span></span></div></header><div class="post-body"><div class="post-excerpt"><p> TypeScript ä¸­æœ‰å¾ˆå¤šé¢„ç½®çš„å·¥å…·ç±»å‹ï¼Œå®ƒä»¬æ— éœ€å¯¼å…¥ï¼Œå¯åœ¨å…¨å±€ä½¿ç”¨ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹è¿™äº›åŸºæœ¬çš„å·¥å…·ç±»å‹ï¼Œä¸€æ–¹é¢çš„ç›®çš„æ˜¯ä¸ºäº†äº†è§£å¦‚ä½•ä½¿ç”¨åŸºç¡€ç±»å‹æ¥å®ç°è¿™äº›å·¥å…·ç±»å‹ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿèƒ½è¿‡åˆ©ç”¨è¿™äº›å·¥å…·ç±»å‹æ¥åº”å¯¹ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼Œå®ç°æ›´å¤æ‚çš„ç±»å‹ã€‚</p>
<p>Omit<br>å®ƒçš„ä½œç”¨æ˜¯é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°å»æ‰æŒ‡å®šçš„keyå¹¶ä¸”è¿”å›æ–°çš„ç±»å‹ï¼Œä¸‹é¢ä¸¾ä¸ªğŸŒ°</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">type Omit&lt;T, K extends keyof T&gt; = &#123;[P <span class="keyword">in</span> keyof T <span class="keyword">as</span> P extends K ? never: P] :T[P]&#125;</span><br><span class="line"></span><br><span class="line">interface Todo &#123;</span><br><span class="line">  title: string</span><br><span class="line">  description: string</span><br><span class="line">  completed: boolean</span><br><span class="line">&#125;</span><br><span class="line">type TodoPreview = Omit&lt;Todo, <span class="string">'description'</span> | <span class="string">'title'</span>&gt;</span><br><span class="line"><span class="keyword">const</span> todo: TodoPreview = &#123;</span><br><span class="line">  completed: <span class="literal">false</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼ŒOmit ç±»å‹çš„å®ç°ä½¿ç”¨äº†å‰é¢ä»‹ç»çš„ Pick ç±»å‹ã€‚æˆ‘ä»¬çŸ¥é“ Pick ç±»å‹çš„ä½œç”¨æ˜¯é€‰å–ç»™å®šç±»å‹çš„æŒ‡å®šå±æ€§ï¼Œé‚£ä¹ˆè¿™é‡Œçš„ Omit çš„ä½œç”¨åº”è¯¥æ˜¯é€‰å–é™¤äº†æŒ‡å®šå±æ€§ä¹‹å¤–çš„å±æ€§ï¼Œè€Œ Exclude å·¥å…·ç±»å‹çš„ä½œç”¨å°±æ˜¯ä»å…¥å‚ T å±æ€§çš„è”åˆç±»å‹ä¸­æ’é™¤å…¥å‚ K æŒ‡å®šçš„è‹¥å¹²å±æ€§ã€‚</p>
<p>Pick<br>å®ƒå¯ä»¥é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°æ¥æŒ‡å®šæ–°çš„ç±»å‹ä¸­åŒ…å«å“ªäº›keyå€¼ï¼Œå¹¶ä¸”è¿”å›è¿™ä¸ªæ–°çš„ç±»å‹ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">type Pick&lt;T, K extends keyof T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> K]: T[P];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">interface Todo &#123;</span><br><span class="line">  title: string</span><br><span class="line">  description: string</span><br><span class="line">  completed: boolean</span><br><span class="line">&#125;</span><br><span class="line">type TodoPreview = Pick&lt;Todo, <span class="string">'title'</span> | <span class="string">'completed'</span>&gt;</span><br><span class="line"><span class="keyword">const</span> todo: TodoPreview = &#123;</span><br><span class="line">    title: <span class="string">'Clean room'</span>,</span><br><span class="line">    completed: <span class="literal">false</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒPickè¿™ä¸ªå·¥å…·ç±»å‹æ¥æ”¶çš„ä¸¤ä¸ªå‚æ•°å‡ä¸ºæ³›å‹ï¼Œç¬¬ä¸€ä¸ª T ä¸ºåŸæœ‰çš„å‚æ•°ç±»å‹ï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°Kä¸ºéœ€è¦æå–çš„é”®å€¼ keyã€‚<br>å½“æœ‰äº†Pickä»¥åï¼ŒOmitä¹Ÿå¯ä»¥è¿™æ ·æ¥å®ç°ï¼Œå¦‚ä¸‹ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type Omit&lt;T, K extends keyof any&gt; = Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;;</span><br></pre></td></tr></table></div></figure>

<p>Readonly<br>Readonly,é¡¾åæ€ä¹‰ä¸ºå°†æŒ‡å®šç±»å‹çš„å±æ€§å…¨éƒ¨è®¾ç½®ä¸ºåªè¯»ï¼Œè¿™ä¹Ÿè¡¨æ˜è¿”å›çš„æ–°çš„ç±»å‹çš„å±æ€§ä¸å¯ä»¥å†è¢«äºŒæ¬¡èµ‹å€¼ã€‚ğŸŒ°å¦‚ä¸‹</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">type Readonly&lt;T&gt; = &#123;</span><br><span class="line">  readonly [P <span class="keyword">in</span> keyof T]: T[P];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">interface Todo &#123;</span><br><span class="line">  title: string</span><br><span class="line">  description: string</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> todo: Readonly&lt;Todo&gt; = &#123;</span><br><span class="line">  title: <span class="string">"Hey"</span>,</span><br><span class="line">  description: <span class="string">"foobar"</span></span><br><span class="line">&#125;</span><br><span class="line">todo.title = <span class="string">"Hello"</span> <span class="comment">// Error: cannot reassign a readonly property</span></span><br></pre></td></tr></table></div></figure>
<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œç»è¿‡ Readonly å¤„ç†åï¼Œtodo çš„ titleã€descriptionå±æ€§éƒ½å˜æˆäº† readonly åªè¯»ã€‚</p>
<p>Partial<br>Partial å¯ä»¥å°†ä¸€ä¸ªç±»å‹çš„æ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰çš„ï¼Œä¸”è¿”å›çš„ç±»å‹æ˜¯ç»™å®šç±»å‹çš„æ‰€æœ‰å­é›†ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">type Partial&lt;T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T]?: T[P];</span><br><span class="line">&#125;;</span><br><span class="line">interface Person &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age?: number;</span><br><span class="line">  weight?: number;</span><br><span class="line">&#125;</span><br><span class="line">type PartialPerson = Partial&lt;Person&gt;;</span><br><span class="line">interface PartialPerson &#123;</span><br><span class="line">  name?: string;</span><br><span class="line">  age?: number;</span><br><span class="line">  weight?: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ˜ å°„ç±»å‹å–å‡ºäº†ä¼ å…¥ç±»å‹çš„æ‰€æœ‰é”®å€¼ï¼Œå¹¶å°†å…¶å€¼è®¾å®šä¸ºå¯é€‰çš„ã€‚</p>
<p>Required<br>Required å·¥å…·ç±»å‹å°†å…¥å‚ç±»å‹ä¸­çš„æ‰€æœ‰å±æ€§æ”¹ä¸ºå¿…å¡«ã€‚ğŸŒ°å¦‚ä¸‹</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">type Required&lt;T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T]-?: T[P];</span><br><span class="line">&#125;;</span><br><span class="line">type RequiredPerson = Required&lt;Person&gt;;</span><br><span class="line">interface RequiredPerson &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">  weight: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨é”®å€¼çš„åé¢é‡‡ç”¨ - ç¬¦å·ï¼Œ- ä¸ ? ä¸€èµ·è¡¨ç¤ºå»é™¤è¯¥ç±»å‹çš„å¯é€‰å±æ€§ï¼Œå› æ­¤ä¼ å…¥ç±»å‹çš„æ‰€æœ‰å±æ€§éƒ½å˜ä¸ºäº†å¿…å¡«ã€‚</p>
<p>Exclude<br>ä¸Šè¿°åœ¨Omitçš„ç¬¬äºŒç§å®ç°æ–¹æ³•é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Exclude ã€‚ä¸éš¾çœ‹å‡ºäº† Excludeçš„ä½œç”¨æ˜¯ä»ç±»å‹ä¸­å»é™¤æŒ‡å®šçš„å±æ€§ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> type Exclude&lt;T, U&gt; = T extends U ? never : T;</span><br><span class="line">type T = Exclude&lt;<span class="string">'a'</span> | <span class="string">'b'</span> | <span class="string">'c'</span>, <span class="string">'a'</span>&gt;; <span class="comment">// =&gt; 'b' | 'c'</span></span><br><span class="line">type NewPerson = Omit&lt;Person, <span class="string">'weight'</span>&gt;;</span><br><span class="line"><span class="comment">// ç›¸å½“äº</span></span><br><span class="line">type NewPerson = Pick&lt;Person, Exclude&lt;keyof Person, <span class="string">'weight'</span>&gt;&gt;;</span><br><span class="line"><span class="comment">// å…¶ä¸­</span></span><br><span class="line">type ExcludeKeys = Exclude&lt;keyof Person, <span class="string">'weight'</span>&gt;; <span class="comment">// =&gt; 'name' | 'age'</span></span><br></pre></td></tr></table></div></figure>
<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼ŒExclude çš„å®ç°ä½¿ç”¨äº†æ¡ä»¶ç±»å‹ã€‚å¦‚æœç±»å‹ T å¯è¢«åˆ†é…ç»™ç±»å‹ U ï¼Œåˆ™ä¸è¿”å›ç±»å‹ Tï¼Œå¦åˆ™è¿”å›æ­¤ç±»å‹ T ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä»è”åˆç±»å‹ä¸­å»é™¤äº†æŒ‡å®šçš„ç±»å‹ã€‚</p>
<p>Record<br>Record çš„ä½œç”¨æ˜¯ç”Ÿæˆæ¥å£ç±»å‹ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨ä¼ å…¥çš„æ³›å‹å‚æ•°åˆ†åˆ«ä½œä¸ºæ¥å£ç±»å‹çš„å±æ€§å’Œå€¼ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">type Record&lt;K extends keyof any, T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> K]: T;</span><br><span class="line">&#125;;</span><br><span class="line">type MenuKey = <span class="string">'home'</span> | <span class="string">'about'</span> | <span class="string">'more'</span>;</span><br><span class="line">interface Menu &#123;</span><br><span class="line">  label: string;</span><br><span class="line">  hidden?: boolean;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> menus: Record&lt;MenuKey, Menu&gt; = &#123;</span><br><span class="line">  about: &#123; <span class="attr">label</span>: <span class="string">'å…³äº'</span> &#125;,</span><br><span class="line">  home: &#123; <span class="attr">label</span>: <span class="string">'ä¸»é¡µ'</span> &#125;,</span><br><span class="line">  more: &#123; <span class="attr">label</span>: <span class="string">'æ›´å¤š'</span>, <span class="attr">hidden</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>
<p>Recordçš„å†…éƒ¨å®šä¹‰ï¼Œæ¥æ”¶ä¸¤ä¸ªæ³›å‹å‚æ•°,æ³›å‹Kå³ä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚p in xxæ„æ€å°±æ˜¯éå†ï¼Œå¦‚ä¸Šå°†ç±»å‹MenuKeyè¿›è¡Œéå†ï¼Œä¹Ÿå°±æ˜¯stringã€‚æ¯ä¸ªå±æ€§éƒ½æ˜¯ä¼ å…¥çš„Tç±»å‹ã€‚<br>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼ŒRecord ç±»å‹æ¥æ”¶äº†ä¸¤ä¸ªæ³›å‹å‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºæ¥å£ç±»å‹çš„å±æ€§ï¼Œç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºæ¥å£ç±»å‹çš„å±æ€§å€¼ã€‚<br>éœ€è¦æ³¨æ„ï¼šè¿™é‡Œçš„å®ç°é™å®šäº†ç¬¬ä¸€ä¸ªæ³›å‹å‚æ•°ç»§æ‰¿è‡ªkeyof anyã€‚<br>åœ¨ TypeScript ä¸­ï¼Œkeyof any æŒ‡ä»£å¯ä»¥ä½œä¸ºå¯¹è±¡é”®çš„å±æ€§ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š<br>type T = keyof any; // =&gt; string | number | symbol<br>è¯´æ˜ï¼šç›®å‰ï¼ŒJavaScript ä»…æ”¯æŒstringã€numberã€symbolä½œä¸ºå¯¹è±¡çš„é”®å€¼ã€‚</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/10/30/Ts%E7%B1%BB%E7%B1%BB%E5%9E%8B/">Tsç±»ç±»å‹</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-10-30</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>åœ¨JavaScriptï¼ˆES5ï¼‰ä¸­ä»…æ”¯æŒé€šè¿‡å‡½æ•°å’ŒåŸå‹é“¾ç»§æ‰¿æ¨¡æ‹Ÿç±»çš„å®ç°ï¼ˆç”¨äºæŠ½è±¡ä¸šåŠ¡æ¨¡å‹ã€ç»„ç»‡æ•°æ®ç»“æ„å¹¶åˆ›å»ºå¯é‡ç”¨ç»„ä»¶ï¼‰ï¼Œè‡ª ES6 å¼•å…¥ class å…³é”®å­—åï¼Œå®ƒæ‰å¼€å§‹æ”¯æŒä½¿ç”¨ä¸Javaç±»ä¼¼çš„è¯­æ³•å®šä¹‰å£°æ˜ç±»ã€‚<br>TypeScript ä½œä¸º JavaScript çš„è¶…é›†ï¼Œè‡ªç„¶ä¹Ÿæ”¯æŒ class çš„å…¨éƒ¨ç‰¹æ€§ï¼Œå¹¶ä¸”è¿˜å¯ä»¥å¯¹ç±»çš„å±æ€§ã€æ–¹æ³•ç­‰è¿›è¡Œé™æ€ç±»å‹æ£€æµ‹ã€‚</p>
<p>ç±»<br>åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œä»»ä½•å®ä½“éƒ½å¯ä»¥è¢«æŠ½è±¡ä¸ºä¸€ä¸ªä½¿ç”¨ç±»è¡¨è¾¾çš„ç±»ä¼¼å¯¹è±¡çš„æ•°æ®ç»“æ„ï¼Œä¸”è¿™ä¸ªæ•°æ®ç»“æ„æ—¢åŒ…å«å±æ€§ï¼ŒåˆåŒ…å«æ–¹æ³•ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ä¸‹æ–¹æŠ½è±¡äº†ä¸€ä¸ªçŒ«çš„ç±»ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line"> Â name: string;</span><br><span class="line"> Â <span class="keyword">constructor</span>(name: string) &#123;</span><br><span class="line"> Â  Â <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"> Â  meow() &#123;</span><br><span class="line"> Â  Â <span class="built_in">console</span>.log(<span class="string">'Mew! Mew!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> cat = <span class="keyword">new</span> Cat(<span class="string">'Q'</span>);</span><br><span class="line">cat. meow(); <span class="comment">// =&gt; 'Mew! Mew!'</span></span><br></pre></td></tr></table></div></figure>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª class Cat ï¼Œå®ƒæ‹¥æœ‰ string ç±»å‹çš„ name å±æ€§ã€meow æ–¹æ³•å’Œä¸€ä¸ªæ„é€ å™¨å‡½æ•°ã€‚ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡ new å…³é”®å­—åˆ›å»ºäº†ä¸€ä¸ª Cat çš„å®ä¾‹ï¼Œå¹¶æŠŠå®ä¾‹èµ‹å€¼ç»™å˜é‡ catã€‚æœ€åï¼Œæˆ‘ä»¬é€šè¿‡å®ä¾‹è°ƒç”¨äº†ç±»ä¸­å®šä¹‰çš„ meow æ–¹æ³•ã€‚å¦‚æœä½¿ç”¨ä¼ ç»Ÿçš„ JavaScript ä»£ç å®šä¹‰ç±»ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å‡½æ•°+åŸå‹é“¾çš„å½¢å¼è¿›è¡Œæ¨¡æ‹Ÿï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤º</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name: string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name; <span class="comment">// </span></span><br><span class="line">&#125;</span><br><span class="line">Cat.prototype.meow = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Mew! Mew!'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cat = <span class="keyword">new</span> Cat(<span class="string">'orange'</span>); <span class="comment">// </span></span><br><span class="line">cat.meow(); <span class="comment">// =&gt; 'Mew! Mew!'</span></span><br></pre></td></tr></table></div></figure>
<p>æˆ‘ä»¬å®šä¹‰äº† Cat ç±»çš„æ„é€ å‡½æ•°ï¼Œå¹¶åœ¨æ„é€ å‡½æ•°å†…éƒ¨å®šä¹‰äº† name å±æ€§ï¼Œé€šè¿‡ Cat çš„åŸå‹é“¾æ·»åŠ  meow æ–¹æ³•ã€‚å’Œé€šè¿‡ class æ–¹å¼å®šä¹‰ç±»ç›¸æ¯”ï¼Œè¿™ç§æ–¹å¼æ˜æ˜¾éº»çƒ¦ä¸å°‘ï¼Œè€Œä¸”è¿˜ç¼ºå°‘é™æ€ç±»å‹æ£€æµ‹ã€‚å› æ­¤ï¼Œç±»æ˜¯ TypeScript ç¼–ç¨‹ä¸­ååˆ†æœ‰ç”¨ä¸”ä¸å¾—ä¸æŒæ¡çš„å·¥å…·ã€‚</p>
<p>ç±»çš„ç»§æ‰¿<br>åœ¨ TypeScript ä¸­ï¼Œä½¿ç”¨ extends å…³é”®å­—å°±èƒ½å¾ˆæ–¹ä¾¿åœ°å®šä¹‰ç±»ç»§æ‰¿çš„æŠ½è±¡æ¨¡å¼ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line"> Â type = <span class="string">'Animal'</span>;</span><br><span class="line"> Â say(name: string) &#123;</span><br><span class="line"> Â  Â <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">$&#123;name&#125;</span>~`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line"> Â  meow() &#123;</span><br><span class="line"> Â  Â <span class="built_in">console</span>.log(<span class="string">'Mew! Mew!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> cat= <span class="keyword">new</span> Cat();</span><br><span class="line">cat. meow(); <span class="comment">// =&gt; 'Mew! Mew!'</span></span><br><span class="line">cat.say(<span class="string">'orange'</span>); <span class="comment">// =&gt; My name is orange!</span></span><br><span class="line">cat.type; <span class="comment">// =&gt; Animal</span></span><br></pre></td></tr></table></div></figure>
<p>catæ˜¯æ´¾ç”Ÿç±»ï¼Œå®ƒæ´¾ç”Ÿè‡ªå®šä¹‰çš„AnimalåŸºç±»ï¼Œæ­¤æ—¶Catå®ä¾‹ç»§æ‰¿äº†åŸºç±»Animalçš„å±æ€§å’Œæ–¹æ³•ã€‚å› æ­¤ï¼Œå®ä¾‹ cat æ”¯æŒ meowã€sayã€type ç­‰å±æ€§å’Œæ–¹æ³•ã€‚<br>è¿™é‡ŒCatç±»ä¸­æˆ‘ä»¬æ²¡æœ‰å†™æ„é€ å‡½æ•°ï¼Œå› ä¸ºæ´¾ç”Ÿç±»å¦‚æœåŒ…å«ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œåˆ™å¿…é¡»åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨ super() æ–¹æ³•ï¼Œè¿™æ˜¯ TypeScript å¼ºåˆ¶æ‰§è¡Œçš„ä¸€æ¡é‡è¦è§„åˆ™ã€‚å¦‚ä¸‹ï¼Œå› ä¸ºå®šä¹‰çš„ Cat ç±»æ„é€ å‡½æ•°ä¸­æ²¡æœ‰è°ƒç”¨ super æ–¹æ³•ï¼Œæ‰€ä»¥æç¤ºäº†ä¸€ä¸ª ts(2377) çš„é”™è¯¯ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  name: string;</span><br><span class="line">  <span class="keyword">constructor</span>(name: string) &#123;<span class="comment">//æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°å¿…é¡»åŒ…å« "super" è°ƒç”¨ã€‚ts(2377)</span></span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">   meow() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Mew! Mew!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>super å‡½æ•°ä¼šè°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  age: number;</span><br><span class="line"> Â type = <span class="string">'Animal'</span>;</span><br><span class="line"> Â <span class="keyword">constructor</span>(age: number) &#123;</span><br><span class="line"> Â  Â <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"> Â say(name: string) &#123;</span><br><span class="line"> Â  Â <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">$&#123;name&#125;</span>~`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line"> Â name: string;</span><br><span class="line"> Â <span class="keyword">constructor</span>(name: string) &#123;</span><br><span class="line"> Â  Â <span class="keyword">super</span>(); <span class="comment">// åº”æœ‰ 1 ä¸ªå‚æ•°ï¼Œä½†è·å¾— 0 ä¸ªã€‚ts(2554)</span></span><br><span class="line"> Â  Â <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> meow() &#123;</span><br><span class="line"> Â  Â <span class="built_in">console</span>.log(<span class="string">'Mew! Mew!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>Animal ç±»çš„æ„é€ å‡½æ•°è¦æ±‚å¿…é¡»ä¼ å…¥ä¸€ä¸ªæ•°å­—ç±»å‹çš„ age å‚æ•°ï¼Œè€Œå­ç±»å®é™…å…¥å‚ä¸ºç©ºï¼Œæ‰€ä»¥æç¤ºäº†ä¸€ä¸ª ts(2554) çš„é”™è¯¯ã€‚å¦‚æœæˆ‘ä»¬æ˜¾å¼åœ°ç»™ super å‡½æ•°ä¼ å…¥ä¸€ä¸ª number ç±»å‹çš„å€¼ï¼Œæ¯”å¦‚è¯´ super(1)ï¼Œåˆ™ä¸ä¼šå†æç¤ºé”™è¯¯äº†ã€‚</p>
<p>æŠ½è±¡ç±»<br>æŠ½è±¡ç±»æ˜¯ä¸€ç§ä¸èƒ½è¢«å®ä¾‹åŒ–ä»…èƒ½è¢«å­ç±»ç»§æ‰¿çš„ç‰¹æ®Šç±»ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æŠ½è±¡ç±»å®šä¹‰æ´¾ç”Ÿç±»éœ€è¦å®ç°çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å®šä¹‰å…¶ä»–è¢«ç»§æ‰¿çš„é»˜è®¤å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">abstract <span class="class"><span class="keyword">class</span> <span class="title">Multiplier</span> </span>&#123;</span><br><span class="line">  abstract a: number;</span><br><span class="line">  abstract b: number;</span><br><span class="line">  abstract multiply(): number;</span><br><span class="line">  showName = <span class="string">'Multiplier'</span>;</span><br><span class="line">  multiplyTwice(): number &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.pow((<span class="keyword">this</span>.a * <span class="keyword">this</span>.b),<span class="number">2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumMultiplier</span> <span class="keyword">extends</span> <span class="title">Multiplier</span> </span>&#123;</span><br><span class="line">  a: number;</span><br><span class="line">  b: number;</span><br><span class="line">  <span class="keyword">constructor</span>(a: number, b: number) &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.a = a;</span><br><span class="line">    <span class="keyword">this</span>.b = b;</span><br><span class="line">  &#125;</span><br><span class="line">  multiply(): number &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a * <span class="keyword">this</span>.b;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numMultiplier = <span class="keyword">new</span> NumMultiplier(<span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line"><span class="built_in">console</span>.log(numMultiplier.showName); <span class="comment">// =&gt; "Multiplier"</span></span><br><span class="line"><span class="built_in">console</span>.log(numMultiplier.multiply()); <span class="comment">// =&gt; 15</span></span><br><span class="line"><span class="built_in">console</span>.log(numAdder.multiplyTwice()); <span class="comment">// =&gt; 225</span></span><br></pre></td></tr></table></div></figure>
<p>é€šè¿‡ abstract å…³é”®å­—ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡ç±»Multiplierï¼Œå¹¶é€šè¿‡abstractå…³é”®å­—å®šä¹‰äº†æŠ½è±¡å±æ€§aã€båŠæ–¹æ³•multiplyï¼Œè€Œä¸”ä»»ä½•ç»§æ‰¿Multiplierçš„æ´¾ç”Ÿç±»éƒ½éœ€è¦å®ç°è¿™äº›æŠ½è±¡å±æ€§å’Œæ–¹æ³•ã€‚å› ä¸ºæŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œå¹¶ä¸”æ´¾ç”Ÿç±»å¿…é¡»å®ç°ç»§æ‰¿è‡ªæŠ½è±¡ç±»ä¸Šçš„æŠ½è±¡å±æ€§å’Œæ–¹æ³•å®šä¹‰ï¼Œæ‰€ä»¥æŠ½è±¡ç±»çš„ä½œç”¨å…¶å®å°±æ˜¯å¯¹åŸºç¡€é€»è¾‘çš„å°è£…å’ŒæŠ½è±¡ã€‚</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/09/25/Ts%E5%87%BD%E6%95%B0/">Tså‡½æ•°</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-09-25</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>åœ¨ TypeScript é‡Œå®šä¹‰å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾å¼æŒ‡å®šå‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹ï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> add = (a: number, <span class="attr">b</span>: number): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>è¿”å›å€¼ç±»å‹<br>åœ¨ JavaScript ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªå‡½æ•°å¯ä»¥æ²¡æœ‰æ˜¾å¼ returnï¼Œæ­¤æ—¶å‡½æ•°çš„è¿”å›å€¼åº”è¯¥æ˜¯ undefinedï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do sth</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(func()); <span class="comment">// =&gt; undefined</span></span><br></pre></td></tr></table></div></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ TypeScript ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ˜¾å¼å£°æ˜å‡½æ•°çš„è¿”å›å€¼ç±»å‹ä¸º undfinedï¼Œå°†ä¼šå¾—åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„é”™è¯¯æé†’ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>): <span class="title">undefined</span> </span>&#123; <span class="comment">// å…¶å£°æ˜ç±»å‹ä¸ä¸º "void" æˆ– "any" çš„å‡½æ•°å¿…é¡»è¿”å›å€¼ã€‚ts(2355)</span></span><br><span class="line">  <span class="comment">// do sth</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>æ­¤æ—¶ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨void ç±»å‹æ¥è¡¨ç¤ºå‡½æ•°æ²¡æœ‰è¿”å›å€¼çš„ç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcA</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">funcA().doSomething(); <span class="comment">// ç±»å‹â€œvoidâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œdoSomethingâ€ã€‚ts(2339)</span></span><br></pre></td></tr></table></div></figure>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»ä¼¼å®šä¹‰ç®­å¤´å‡½æ•°çš„è¯­æ³•æ¥è¡¨ç¤ºå‡½æ•°ç±»å‹çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ï¼Œæ­¤æ—¶=&gt; ç±»å‹ä»…ä»…ç”¨æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ç±»å‹è€Œä¸ç”¨å®ç°è¿™ä¸ªå‡½æ•°ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„=&gt;ä¸ ES6 ä¸­ç®­å¤´å‡½æ•°çš„=&gt;æœ‰æ‰€ä¸åŒã€‚TypeScript å‡½æ•°ç±»å‹ä¸­çš„=&gt;ç”¨æ¥è¡¨ç¤ºå‡½æ•°çš„å®šä¹‰ï¼Œå…¶å·¦ä¾§æ˜¯å‡½æ•°çš„å‚æ•°ç±»å‹ï¼Œå³ä¾§æ˜¯å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼›è€Œ ES6 ä¸­çš„=&gt;æ˜¯å‡½æ•°çš„å®ç°ã€‚</p>
<p>å¦‚ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ç±»å‹,å¹¶ä¸”ä½¿ç”¨ç®­å¤´å‡½æ•°å®ç°äº†è¿™ä¸ªç±»å‹ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">type Adder = <span class="function">(<span class="params">a: number, b: number</span>) =&gt;</span> number; <span class="comment">// TypeScript å‡½æ•°ç±»å‹å®šä¹‰</span></span><br><span class="line"><span class="keyword">const</span> add: Adder = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b; <span class="comment">// ES6 ç®­å¤´å‡½æ•°</span></span><br></pre></td></tr></table></div></figure>

<p>åœ¨å¯¹è±¡ä¸­ï¼Œé™¤äº†ä½¿ç”¨è¿™ç§å£°æ˜è¯­æ³•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ç±»ä¼¼å¯¹è±¡å±æ€§çš„ç®€å†™è¯­æ³•æ¥å£°æ˜å‡½æ•°ç±»å‹çš„å±æ€§ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">interface Entity &#123;</span><br><span class="line">    add: <span class="function">(<span class="params">m: number, n: number</span>) =&gt;</span> number;</span><br><span class="line">    del(m: number, <span class="attr">n</span>: number): number;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> entity: Entity = &#123;</span><br><span class="line">    add: <span class="function">(<span class="params">m, n</span>) =&gt;</span> m + n,</span><br><span class="line">    del(m, n) &#123;</span><br><span class="line">      <span class="keyword">return</span> m - n;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>

<p>å¯ç¼ºçœå’Œå¯æ¨æ–­çš„è¿”å›å€¼ç±»å‹<br>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¿…æˆ–è€…ä¸èƒ½æ˜¾å¼åœ°æŒ‡æ˜è¿”å›å€¼çš„ç±»å‹ï¼Œè¿™å°±æ¶‰åŠå¯ç¼ºçœå’Œå¯æ¨æ–­çš„è¿”å›å€¼ç±»å‹çš„è®²è§£ã€‚<br>å‡½æ•°å†…æ˜¯ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å…¥å‚å¯¹å€¼åŠ å·¥è®¡ç®—ï¼Œå¹¶è¿”å›æ–°çš„å€¼ã€‚ä»ç±»å‹å±‚é¢çœ‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç±»å‹æ¨æ–­åŠ å·¥è®¡ç®—å…¥å‚çš„ç±»å‹ï¼Œå¹¶è¿”å›æ–°çš„ç±»å‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateTypes</span>(<span class="params">m: string, n: number</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> numbers = [n];</span><br><span class="line">  <span class="keyword">const</span> strings = [m]</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    numbers,</span><br><span class="line">    strings</span><br><span class="line">  &#125; <span class="comment">// è¿”å› &#123; numbers: number[]; strings: string[] &#125; çš„ç±»å‹ </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>å‚æ•°ç±»å‹</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">x?: string</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log1</span>(<span class="params">x: string | undefined</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br><span class="line">log();</span><br><span class="line">log(<span class="literal">undefined</span>);</span><br><span class="line">log1(); <span class="comment">// åº”æœ‰ 1 ä¸ªå‚æ•°ï¼Œä½†è·å¾— 0 ä¸ªã€‚ts(2554)</span></span><br><span class="line">log1(<span class="literal">undefined</span>);</span><br></pre></td></tr></table></div></figure>
<p>è¿™é‡Œçš„ ?: è¡¨ç¤ºå‚æ•°å¯ä»¥ç¼ºçœã€å¯ä»¥ä¸ä¼ ï¼Œä¹Ÿå°±æ˜¯è¯´è°ƒç”¨å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸æ˜¾å¼ä¼ å…¥å‚æ•°ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å£°æ˜äº†å‚æ•°ç±»å‹ä¸º xxx | undefinedï¼Œå°±è¡¨ç¤ºå‡½æ•°å‚æ•°æ˜¯ä¸å¯ç¼ºçœä¸”ç±»å‹å¿…é¡»æ˜¯ xxx æˆ–è€… undfinedã€‚å› æ­¤ï¼Œåœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œlog1 å‡½æ•°å¦‚æœä¸æ˜¾ç¤ºä¼ å…¥å‡½æ•°çš„å‚æ•°ï¼ŒTypeScript å°±ä¼šæŠ¥ä¸€ä¸ª ts(2554) çš„é”™è¯¯ï¼Œå³å‡½æ•°éœ€è¦ 1 ä¸ªå‚æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬åªä¼ å…¥äº† 0 ä¸ªå‚æ•°ã€‚</p>
<p>this<br>ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨ JavaScript ä¸­ï¼Œå‡½æ•° this çš„æŒ‡å‘ä¸€ç›´æ˜¯ä¸€ä¸ªä»¤äººå¤´ç—›çš„é—®é¢˜ã€‚å› ä¸º this çš„å€¼éœ€è¦ç­‰åˆ°å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰èƒ½è¢«ç¡®å®šï¼Œæ›´åˆ«è¯´é€šè¿‡ä¸€äº›æ–¹æ³•è¿˜å¯ä»¥æ”¹å˜ this çš„æŒ‡å‘ã€‚ä¹Ÿå°±æ˜¯è¯´ this çš„ç±»å‹ä¸å›ºå®šï¼Œå®ƒå–å†³äºæ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ã€‚<br>ä½†æ˜¯ï¼Œä½¿ç”¨äº† TypeScript åï¼Œæˆ‘ä»¬å°±ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªé—®é¢˜äº†ã€‚é€šè¿‡æŒ‡å®š this çš„ç±»å‹ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¿…é¡»æ˜¾å¼æŒ‡å®š this çš„ç±»å‹ï¼‰ï¼Œå½“æˆ‘ä»¬é”™è¯¯ä½¿ç”¨äº† thisï¼ŒTypeScript å°±ä¼šæç¤ºæˆ‘ä»¬.<br>åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸­å£°æ˜ this æŒ‡ä»£çš„å¯¹è±¡ï¼ˆå³å‡½æ•°è¢«è°ƒç”¨çš„æ–¹å¼ï¼‰å³å¯ï¼Œæ¯”å¦‚æœ€ç®€å•çš„ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•çš„ this æŒ‡å‘.</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params">this: Window, name: string</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.say = say;</span><br><span class="line"><span class="built_in">window</span>.say(<span class="string">'hi'</span>);</span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    say</span><br><span class="line">&#125;;</span><br><span class="line">obj.say(<span class="string">'hi'</span>); <span class="comment">// ç±»å‹ä¸ºâ€œ&#123; say: (this: Window, name: string) =&gt; void; &#125;â€çš„ "this" ä¸Šä¸‹æ–‡ä¸èƒ½åˆ†é…ç»™ç±»å‹ä¸ºâ€œWindowâ€çš„æ–¹æ³•çš„ "this"ã€‚</span></span><br><span class="line">  ç±»å‹â€œ&#123; <span class="attr">say</span>: <span class="function">(<span class="params"><span class="keyword">this</span>: Window, name: string</span>) =&gt;</span> <span class="keyword">void</span>; &#125;â€ç¼ºå°‘ç±»å‹â€œWindowâ€çš„ä»¥ä¸‹å±æ€§: clientInformation, closed, customElements, devicePixelRatio åŠå…¶ä»– <span class="number">189</span> é¡¹ã€‚ts(<span class="number">2684</span>)</span><br></pre></td></tr></table></div></figure>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨ window å¯¹è±¡ä¸Šå¢åŠ  say çš„å±æ€§ä¸ºå‡½æ•° sayã€‚é‚£ä¹ˆè°ƒç”¨window.say()æ—¶ï¼Œthis æŒ‡å‘å³ä¸º window å¯¹è±¡ã€‚<br>è°ƒç”¨obj.say()åï¼Œæ­¤æ—¶ TypeScript æ£€æµ‹åˆ° this çš„æŒ‡å‘ä¸æ˜¯ windowï¼Œäºæ˜¯æŠ›å‡ºäº†ä¸€ä¸ª ts(2684) é”™è¯¯ã€‚<br>åŒæ ·ï¼Œå®šä¹‰å¯¹è±¡çš„å‡½æ•°å±æ€§æ—¶ï¼Œåªè¦å®é™…è°ƒç”¨ä¸­ this çš„æŒ‡å‘ä¸æŒ‡å®šçš„ this æŒ‡å‘ä¸åŒï¼ŒTypeScript å°±èƒ½å‘ç° this æŒ‡å‘çš„é”™è¯¯ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    say(<span class="keyword">this</span>: Person): <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> person: Person = &#123;</span><br><span class="line">    name: <span class="string">'captain'</span>,</span><br><span class="line">    say() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> fn = person.say;</span><br><span class="line">fn(); <span class="comment">//ç±»å‹ä¸ºâ€œvoidâ€çš„ "this" ä¸Šä¸‹æ–‡ä¸èƒ½åˆ†é…ç»™ç±»å‹ä¸ºâ€œPersonâ€çš„æ–¹æ³•çš„ "this"ã€‚ts(2684)</span></span><br></pre></td></tr></table></div></figure>
<p>æˆ‘ä»¬è¦æ³¨æ„çš„æ˜¯ï¼Œæ˜¾å¼æ³¨è§£å‡½æ•°ä¸­çš„ this ç±»å‹ï¼Œå®ƒè¡¨é¢ä¸Šå æ®äº†ç¬¬ä¸€ä¸ªå½¢å‚çš„ä½ç½®ï¼Œä½†å¹¶ä¸æ„å‘³ç€å‡½æ•°çœŸçš„å¤šäº†ä¸€ä¸ªå‚æ•°ï¼Œå› ä¸º TypeScript è½¬è¯‘ä¸º JavaScript åï¼Œâ€œä¼ªå½¢å‚â€ this ä¼šè¢«æŠ¹æ‰ï¼Œè¿™ç®—æ˜¯ TypeScript ä¸ºæ•°ä¸å¤šçš„ç‰¹æœ‰è¯­æ³•ã€‚</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/08/22/TS%E5%AD%97%E9%9D%A2%E9%87%8F%E7%B1%BB%E5%9E%8B/">TSå­—é¢é‡ç±»å‹</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-08-22</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>åœ¨ TypeScript ä¸­ï¼Œç±»å‹æ ‡æ³¨å£°æ˜æ˜¯åœ¨å˜é‡ä¹‹åï¼ˆå³ç±»å‹åç½®ï¼‰ï¼Œå®ƒä¸åƒ Java è¯­è¨€ä¸€æ ·ï¼Œå…ˆå£°æ˜å˜é‡çš„ç±»å‹ï¼Œå†å£°æ˜å˜é‡çš„åç§°ã€‚<br>ä½¿ç”¨ç±»å‹æ ‡æ³¨åç½®çš„å¥½å¤„æ˜¯ç¼–è¯‘å™¨å¯ä»¥é€šè¿‡ä»£ç æ‰€åœ¨çš„ä¸Šä¸‹æ–‡æ¨å¯¼å…¶å¯¹åº”çš„ç±»å‹ï¼Œæ— é¡»å†å£°æ˜å˜é‡ç±»å‹ã€‚åœ¨ TypeScript ä¸­ï¼Œå…·æœ‰åˆå§‹åŒ–å€¼çš„å˜é‡ã€æœ‰é»˜è®¤å€¼çš„å‡½æ•°å‚æ•°ã€å‡½æ•°è¿”å›çš„ç±»å‹éƒ½å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡æ¨æ–­å‡ºæ¥ã€‚<br>æ­£æ˜¯å¾—ç›Šäº TypeScript è¿™ç§ç±»å‹æ¨å¯¼æœºåˆ¶å’Œèƒ½åŠ›ï¼Œä½¿å¾—æˆ‘ä»¬æ— é¡»æ˜¾å¼å£°æ˜ï¼Œå³å¯ç›´æ¥é€šè¿‡ä¸Šä¸‹æ–‡ç¯å¢ƒæ¨æ–­å‡ºå˜é‡çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶ç±»å‹å¯ç¼ºçœã€‚<br>å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬å‘ç°è¿™äº›ç¼ºçœç±»å‹æ³¨è§£çš„å˜é‡å¯ä»¥é€šè¿‡ç±»å‹æ¨æ–­å‡ºç±»å‹ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> string = <span class="string">'it is a string'</span>;</span><br><span class="line">  <span class="keyword">let</span> number = <span class="number">666</span>;</span><br><span class="line">  <span class="keyword">let</span> boolean = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">const</span> string = <span class="string">'it is a string'</span>; </span><br><span class="line">  <span class="keyword">const</span> number = <span class="number">666</span>;</span><br><span class="line">  <span class="keyword">const</span> boolean = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>æˆ‘ä»¬é€šè¿‡ VS Code hover ç¤ºä¾‹ä¸­çš„å˜é‡æŸ¥çœ‹ç±»å‹ï¼Œå¯ä»¥å‘ç°ä¸€ä¸ªå¾ˆç¥å¥‡çš„äº‹æƒ…ã€‚é€šè¿‡ let å’Œ const å®šä¹‰çš„èµ‹äºˆäº†ç›¸åŒå€¼çš„å˜é‡ï¼Œå…¶æ¨æ–­å‡ºæ¥çš„ç±»å‹ä¸ä¸€æ ·ã€‚æ¯”å¦‚åŒæ ·æ˜¯ â€˜it is a stringâ€™ï¼Œé€šè¿‡ let å®šä¹‰çš„å˜é‡ç±»å‹æ˜¯ stringï¼Œè€Œé€šè¿‡ const å®šä¹‰çš„å˜é‡ç±»å‹æ˜¯ â€˜it is a stringâ€™â€™ï¼ˆè¿™é‡Œè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ï¼‰ã€‚<br><img src='/images/TSå­—é¢é‡ç±»å‹1.png' width='500px' height='300px'><br><img src='/images/TSå­—é¢é‡ç±»å‹2.png' width='500px' height='300px'></p>

        <h3 id="å­—é¢é‡ç±»å‹"   >
          <a href="#å­—é¢é‡ç±»å‹" class="heading-link"><i class="fas fa-link"></i></a>å­—é¢é‡ç±»å‹</h3>
      <p>åœ¨ TypeScript ä¸­ï¼Œå­—é¢é‡ä¸ä»…å¯ä»¥è¡¨ç¤ºå€¼ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºç±»å‹ï¼Œå³æ‰€è°“çš„å­—é¢é‡ç±»å‹ã€‚<br>ç›®å‰ï¼ŒTypeScript æ”¯æŒ 3 ç§å­—é¢é‡ç±»å‹ï¼šå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€æ•°å­—å­—é¢é‡ç±»å‹ã€å¸ƒå°”å­—é¢é‡ç±»å‹ï¼Œå¯¹åº”çš„å­—ç¬¦ä¸²å­—é¢é‡ã€æ•°å­—å­—é¢é‡ã€å¸ƒå°”å­—é¢é‡åˆ†åˆ«æ‹¥æœ‰ä¸å…¶å€¼ä¸€æ ·çš„å­—é¢é‡ç±»å‹ï¼Œå­—é¢é‡ç±»å‹æ˜¯é›†åˆç±»å‹çš„å­ç±»å‹ï¼Œå®ƒæ˜¯é›†åˆç±»å‹çš„ä¸€ç§æ›´å…·ä½“çš„è¡¨è¾¾ã€‚æ¯”å¦‚ â€˜it is a stringâ€™ ï¼ˆè¿™é‡Œè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ï¼‰ç±»å‹æ˜¯ string ç±»å‹ï¼ˆç¡®åˆ‡åœ°è¯´æ˜¯ string ç±»å‹çš„å­ç±»å‹ï¼‰ï¼Œè€Œ string ç±»å‹ä¸ä¸€å®šæ˜¯ â€˜it is astringâ€™ï¼ˆè¿™é‡Œè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ï¼‰ç±»å‹ã€‚<br>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ä½œä¸ºå˜é‡çš„ç±»å‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> userName: <span class="string">'able'</span> = <span class="string">'able'</span>;</span><br><span class="line">userName = <span class="string">'moriaty'</span>;<span class="comment">//ä¸èƒ½å°†ç±»å‹â€œ"moriaty"â€åˆ†é…ç»™ç±»å‹â€œ"able"â€ã€‚ts(2322)</span></span><br></pre></td></tr></table></div></figure>
<p>å®é™…ä¸Šï¼Œå®šä¹‰å•ä¸ªçš„å­—é¢é‡ç±»å‹å¹¶æ²¡æœ‰å¤ªå¤§çš„ç”¨å¤„ï¼Œå®ƒçœŸæ­£çš„åº”ç”¨åœºæ™¯æ˜¯å¯ä»¥æŠŠå¤šä¸ªå­—é¢é‡ç±»å‹ç»„åˆæˆä¸€ä¸ªè”åˆç±»å‹ï¼Œç”¨æ¥æè¿°æ‹¥æœ‰æ˜ç¡®æˆå‘˜çš„å®ç”¨çš„é›†åˆã€‚<br>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨å­—é¢é‡è”åˆç±»å‹æè¿°äº†ä¸€ä¸ªæ˜ç¡®ã€å¯ â€˜upâ€™ å¯ â€˜downâ€™ çš„é›†åˆï¼Œè¿™æ ·å°±èƒ½æ¸…æ¥šåœ°çŸ¥é“éœ€è¦çš„æ•°æ®ç»“æ„äº†ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">type sportsType = <span class="string">'basketball'</span> | <span class="string">'footbal'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exercise</span>(<span class="params">type: sportsType</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line">exercise(<span class="string">'basketball'</span>); </span><br><span class="line">exercise(<span class="string">'run'</span>); <span class="comment">// ç±»å‹â€œ"run"â€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œsportsTypeâ€çš„å‚æ•°ã€‚ts(2345)</span></span><br></pre></td></tr></table></div></figure>
<p>é€šè¿‡ä½¿ç”¨å­—é¢é‡ç±»å‹ç»„åˆçš„è”åˆç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥é™åˆ¶å‡½æ•°çš„å‚æ•°ä¸ºæŒ‡å®šçš„å­—é¢é‡ç±»å‹é›†åˆï¼Œç„¶åç¼–è¯‘å™¨ä¼šæ£€æŸ¥å‚æ•°æ˜¯å¦æ˜¯æŒ‡å®šçš„å­—é¢é‡ç±»å‹é›†åˆé‡Œçš„æˆå‘˜ã€‚<br>å› æ­¤ï¼Œç›¸è¾ƒäºä½¿ç”¨ string ç±»å‹ï¼Œä½¿ç”¨å­—é¢é‡ç±»å‹ï¼ˆç»„åˆçš„è”åˆç±»å‹ï¼‰å¯ä»¥å°†å‡½æ•°çš„å‚æ•°é™å®šä¸ºæ›´å…·ä½“çš„ç±»å‹ã€‚è¿™ä¸ä»…æå‡äº†ç¨‹åºçš„å¯è¯»æ€§ï¼Œè¿˜ä¿è¯äº†å‡½æ•°çš„å‚æ•°ç±»å‹ï¼Œå¯è°“ä¸€ä¸¾ä¸¤å¾—ã€‚<br>æ•°å­—å­—é¢é‡ç±»å‹å’Œå¸ƒå°”å­—é¢é‡ç±»å‹çš„ä½¿ç”¨ä¸å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹çš„ä½¿ç”¨ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å­—é¢é‡ç»„åˆçš„è”åˆç±»å‹å°†å‡½æ•°çš„å‚æ•°é™å®šä¸ºæ›´å…·ä½“çš„ç±»å‹ã€‚</p>

        <h3 id="å­—é¢é‡ç±»å‹æ‹“å®½"   >
          <a href="#å­—é¢é‡ç±»å‹æ‹“å®½" class="heading-link"><i class="fas fa-link"></i></a>å­—é¢é‡ç±»å‹æ‹“å®½</h3>
      <p>æ‰€æœ‰é€šè¿‡ let æˆ– var å®šä¹‰çš„å˜é‡ã€å‡½æ•°çš„å½¢å‚ã€å¯¹è±¡çš„éåªè¯»å±æ€§ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šäº†åˆå§‹å€¼ä¸”æœªæ˜¾å¼æ·»åŠ ç±»å‹æ³¨è§£çš„æ¡ä»¶ï¼Œé‚£ä¹ˆå®ƒä»¬æ¨æ–­å‡ºæ¥çš„ç±»å‹å°±æ˜¯æŒ‡å®šçš„åˆå§‹å€¼å­—é¢é‡ç±»å‹æ‹“å®½åçš„ç±»å‹ï¼Œè¿™å°±æ˜¯å­—é¢é‡ç±»å‹æ‹“å®½ã€‚<br>ä¸‹é¢æˆ‘ä»¬é€šè¿‡å­—ç¬¦ä¸²å­—é¢é‡çš„ç¤ºä¾‹æ¥ç†è§£ä¸€ä¸‹å­—é¢é‡ç±»å‹æ‹“å®½ï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> string = <span class="string">'it is a string'</span>; <span class="comment">// ç±»å‹æ˜¯ string</span></span><br><span class="line">  <span class="keyword">let</span> stringFunc = <span class="function">(<span class="params">str = <span class="string">'it is a string'</span></span>) =&gt;</span> str; <span class="comment">// ç±»å‹æ˜¯ (str?: string) =&gt; string;</span></span><br><span class="line">  <span class="keyword">const</span> specifiedStr = <span class="string">'it is a string'</span>; <span class="comment">// ç±»å‹æ˜¯ 'it is a string'</span></span><br><span class="line">  <span class="keyword">let</span> strNew = specifiedStr; <span class="comment">// ç±»å‹æ˜¯ 'string'</span></span><br><span class="line">  <span class="keyword">let</span> stringFuncNew = <span class="function">(<span class="params">str = specifiedStr</span>) =&gt;</span> str; <span class="comment">// ç±»å‹æ˜¯ (str?: string) =&gt; string;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>å› ä¸ºstringå’ŒstringFuncæ»¡è¶³äº† letã€å½¢å‚ä¸”æœªæ˜¾å¼å£°æ˜ç±»å‹æ³¨è§£çš„æ¡ä»¶ï¼Œæ‰€ä»¥å˜é‡ã€å½¢å‚çš„ç±»å‹æ‹“å®½ä¸º stringï¼ˆå½¢å‚ç±»å‹ç¡®åˆ‡åœ°è®²æ˜¯ string | undefinedï¼‰ã€‚<br>å› ä¸ºspecifiedStrçš„å¸¸é‡ä¸å¯å˜æ›´ï¼Œç±»å‹æ²¡æœ‰æ‹“å®½ï¼Œæ‰€ä»¥ specifiedStr çš„ç±»å‹æ˜¯ â€˜it is a stringâ€™ å­—é¢é‡ç±»å‹ã€‚<br>å› ä¸ºstrNewèµ‹äºˆçš„å€¼ specifiedStr çš„ç±»å‹æ˜¯å­—é¢é‡ç±»å‹ï¼Œä¸”æ²¡æœ‰æ˜¾å¼ç±»å‹æ³¨è§£ï¼Œæ‰€ä»¥å˜é‡ã€å½¢å‚çš„ç±»å‹ä¹Ÿè¢«æ‹“å®½äº†ã€‚å…¶å®ï¼Œè¿™æ ·çš„è®¾è®¡ç¬¦åˆå®é™…ç¼–ç¨‹è¯‰æ±‚ã€‚æˆ‘ä»¬è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ strNew çš„ç±»å‹è¢«æ¨æ–­ä¸º â€˜this is stringâ€™ï¼Œå®ƒå°†ä¸å¯å˜æ›´ï¼Œå› ä¸ºèµ‹äºˆä»»ä½•å…¶ä»–çš„å­—ç¬¦ä¸²ç±»å‹çš„å€¼éƒ½ä¼šæç¤ºç±»å‹é”™è¯¯ã€‚<br>ä½†æ˜¯è¦æ³¨æ„ä¸€ç‚¹ï¼Œå¦‚æœæ·»åŠ æ˜¾ç¤ºç±»å‹æ³¨è§£ï¼Œåˆ™èƒ½æ§åˆ¶ç±»å‹æ‹“å®½è¡Œä¸ºã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">const</span> specifiedStr: <span class="string">' it is a string'</span> = <span class="string">'it is a string'</span>; <span class="comment">// ç±»å‹æ˜¯ '"it is a string"'</span></span><br><span class="line">  <span class="keyword">let</span> str2 = specifiedStr; <span class="comment">// å³ä¾¿ä½¿ç”¨ let å®šä¹‰ï¼Œç±»å‹æ˜¯ 'it is a string'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/07/23/%E5%89%8D%E7%AB%AF%E4%B8%89%E5%A4%A7%E6%A1%86%E6%9E%B6%E5%AF%B9%E6%AF%94/">å‰ç«¯ä¸‰å¤§æ¡†æ¶å¯¹æ¯”</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-07-23</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>Angular æ˜¯ä¸€ä¸ªåº”ç”¨è®¾è®¡æ¡†æ¶ä¸å¼€å‘å¹³å°ï¼Œç”¨äºåˆ›å»ºé«˜æ•ˆã€å¤æ‚ã€ç²¾è‡´çš„å•é¡µé¢åº”ç”¨ï¼Œæä¾›äº†å‰ç«¯é¡¹ç›®å¼€å‘è¾ƒå®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚<br>ä¸æ­¤ç›¸å¯¹ï¼ŒReact/Vue åˆ™ä¸“æ³¨äºæ„å»ºç”¨æˆ·ç•Œé¢ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ¥è¯´æ˜¯ä¸€ä¸ª JavaScript åº“ï¼Œä¸èƒ½ç§°ä¹‹ä¸ºæ¡†æ¶ã€‚<br>ç”±äº React/Vue éƒ½æä¾›äº†é…å¥—çš„é¡µé¢åº”ç”¨è§£å†³æ–¹æ¡ˆå’Œå·¥å…·åº“ï¼Œå› æ­¤æˆ‘ä»¬å¸¸å¸¸å°†å®ƒä»¬ä½œä¸ºå‰ç«¯æ¡†æ¶ä¸ Angularæ”¾åœ¨ä¸€èµ·æ¯”è¾ƒã€‚<br>å®é™…ä¸Šï¼Œä¸‰ä¸ªæ¡†æ¶çš„å…³ç³»å¯ä»¥ç®€å•ç”¨è¿™æ ·çš„å…¬å¼è¡¨è¾¾ã€‚<br>Angular = React/Vue + è·¯ç”±åº“ï¼ˆreact-router/vue-routerï¼‰ + çŠ¶æ€ç®¡ç†ï¼ˆRedux/Flux/Mobx/Vuexï¼‰ + è„šæ‰‹æ¶/æ„å»ºï¼ˆcreate-react-app/Vue CLI/Webpackï¼‰ + â€¦<br>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Angularã€‚</p>

        <h3 id="Angular"   >
          <a href="#Angular" class="heading-link"><i class="fas fa-link"></i></a>Angular</h3>
      <p>Angular æœ€åˆçš„è®¾è®¡æ˜¯é’ˆå¯¹å¤§å‹åº”ç”¨è¿›è¡Œçš„ï¼Œä¸Šæ‰‹æˆæœ¬è¾ƒé«˜ï¼Œå› ä¸ºå¼€å‘è€…éœ€è¦æŒæ¡ä¸€äº›å¯¹å‰ç«¯å¼€å‘æ¥è¯´è¾ƒé™Œç”Ÿçš„æ¦‚å¿µï¼Œå…¶ä¸­åŒ…æ‹¬ä¾èµ–æ³¨å…¥ã€æ¨¡å—åŒ–ã€è„æ£€æŸ¥ã€AOT ç­‰è®¾è®¡ã€‚</p>

        <h5 id="ä¾èµ–æ³¨å…¥"   >
          <a href="#ä¾èµ–æ³¨å…¥" class="heading-link"><i class="fas fa-link"></i></a>ä¾èµ–æ³¨å…¥</h5>
      <p>åœ¨é¡¹ç›®ä¸­ï¼Œä¾èµ–æ³¨å…¥ä½“ç°ä¸ºï¼šé¡¹ç›®æä¾›äº†è¿™æ ·ä¸€ä¸ªæ³¨å…¥æœºåˆ¶ï¼Œå…¶ä¸­æœ‰äººè´Ÿè´£æä¾›æœåŠ¡ã€æœ‰äººè´Ÿè´£æ¶ˆè€—æœåŠ¡ï¼Œé€šè¿‡æ³¨å…¥æœºåˆ¶æ­å»ºäº†æä¾›æœåŠ¡ä¸æ¶ˆè´¹æœåŠ¡ä¹‹é—´çš„æ¥å£ã€‚Angular é€šè¿‡ä¾èµ–æ³¨å…¥æ¥å¸®æˆ‘ä»¬æ›´å®¹æ˜“åœ°å°†åº”ç”¨é€»è¾‘åˆ†è§£ä¸ºæœåŠ¡ï¼Œå¹¶è®©è¿™äº›æœåŠ¡å¯ç”¨äºå„ä¸ªç»„ä»¶ä¸­ã€‚å‰é¢æåˆ°ï¼ŒAngular çš„è®¾è®¡æ˜¯é’ˆå¯¹å¤§å‹åº”ç”¨çš„ï¼Œä½¿ç”¨ä¾èµ–æ³¨å…¥å¯ä»¥è½»æ¾åœ°å°†å„ä¸ªæ¨¡å—è¿›è¡Œè§£è€¦ï¼Œæ¨¡å—ä¸æ¨¡å—ä¹‹é—´ä¸ä¼šæœ‰è¿‡å¤šçš„ä¾èµ–ï¼Œå¯ä»¥è½»æ¾è§£å†³å¤§å‹åº”ç”¨ä¸­æ¨¡å—éš¾ä»¥ç®¡ç†çš„éš¾é¢˜ã€‚æ‰€ä»¥åœ¨ Angular ä¸­ï¼Œä¾èµ–æ³¨å…¥é…åˆæ¨¡å—åŒ–ç»„ç»‡èƒ½è¾¾åˆ°æ›´å¥½çš„æ•ˆæœã€‚</p>

        <h5 id="æ¨¡å—åŒ–ç»„ç»‡"   >
          <a href="#æ¨¡å—åŒ–ç»„ç»‡" class="heading-link"><i class="fas fa-link"></i></a>æ¨¡å—åŒ–ç»„ç»‡</h5>
      <p>Angular æ¨¡å—æŠŠç»„ä»¶ã€æŒ‡ä»¤å’Œç®¡é“æ‰“åŒ…æˆå†…èšçš„åŠŸèƒ½å—ï¼Œæ¯ä¸ªæ¨¡å—èšç„¦ä¸€ä¸ªç‰¹æ€§åŒºåŸŸã€ä¸šåŠ¡é¢†åŸŸã€å·¥ä½œæµæˆ–é€šç”¨å·¥å…·ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨Angular æ¨¡å—æ¥è‡ªè¡Œèšç„¦æŸä¸€ä¸ªé¢†åŸŸçš„åŠŸèƒ½æ¨¡å—ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Angular å°è£…å¥½çš„ä¸€äº›åŠŸèƒ½æ¨¡å—ï¼Œåƒè¡¨å•æ¨¡å— FormModuleã€è·¯ç”±æ¨¡å— RouterModuleã€Http æ¨¡å—ï¼Œç­‰ç­‰ã€‚é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨éœ€è¦çš„åœ°æ–¹å¼•å…¥è¿™äº›æ¨¡å—å¹¶ä½¿ç”¨ã€‚æ¨¡å—çš„ç»„ç»‡ç»“æ„ä¸ºæ ‘çŠ¶ç»“æ„ï¼Œä¸åŒå±‚çº§çš„æ¨¡å—åŠŸèƒ½ç»„æˆäº†å®Œæ•´çš„åº”ç”¨ã€‚é€šè¿‡æ ‘çŠ¶çš„æ–¹å¼æ¥ï¼Œä¾èµ–æ³¨å…¥ç³»ç»Ÿå¯é«˜æ•ˆåœ°å¯¹æœåŠ¡è¿›è¡Œåˆ›å»ºå’Œé”€æ¯ï¼Œç®¡ç†å„ä¸ªæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚<br>çŠ¶æ€æ›´æ–°ï¼šè„æ£€æŸ¥æœºåˆ¶<br>åœ¨ Angular ä¸­ï¼Œè§¦å‘è§†å›¾æ›´æ–°çš„æ—¶æœºæ¥è‡ªå¸¸è§çš„äº‹ä»¶å¦‚ç”¨æˆ·äº¤äº’ï¼ˆç‚¹å‡»ã€è¾“å…¥ç­‰ï¼‰ã€å®šæ—¶å™¨ã€ç”Ÿå‘½å‘¨æœŸç­‰ï¼Œå¤§æ¦‚çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š<br>åœ¨ä¸Šè¿°æ—¶æœºè¢«è§¦å‘åï¼ŒAngularä¼šè®¡ç®—æ•°æ®çš„æ–°å€¼å’Œæ—§å€¼æ˜¯å¦æœ‰å·®å¼‚ï¼›<br>è‹¥æœ‰å·®å¼‚ï¼ŒAngular ä¼šæ›´æ–°é¡µé¢ï¼Œå¹¶è§¦å‘ä¸‹ä¸€æ¬¡çš„è„æ£€æŸ¥ï¼›<br>ç›´åˆ°æ–°æ—§å€¼ä¹‹é—´ä¸å†æœ‰å·®å¼‚ï¼Œæˆ–æ˜¯è„æ£€æŸ¥çš„æ¬¡æ•°è¾¾åˆ°è®¾å®šé˜ˆå€¼ï¼Œæ‰ä¼šåœä¸‹æ¥ã€‚<br>ç”±äºå¹¶ä¸æ˜¯ç›´æ¥ç›‘å¬æ•°æ®çš„å˜åŠ¨ï¼ŒåŒæ—¶æ¯ä¸€æ¬¡æ›´æ–°é¡µé¢ä¹‹åï¼Œå¾ˆå¯èƒ½è¿˜ä¼šå¼•èµ·æ–°çš„å€¼æ”¹å˜ï¼Œè¿™å¯¼è‡´è„æ£€æŸ¥çš„æ•ˆç‡å¾ˆä½ï¼Œè¿˜å¯èƒ½ä¼šå¯¼è‡´æ­»å¾ªç¯ã€‚è™½ç„¶ AngularJS æœ‰é˜ˆå€¼æ§åˆ¶ï¼Œä½†ä¹Ÿæ— æ³•é¿å…è„æ£€æŸ¥æœºåˆ¶æ‰€å¯¼è‡´çš„ä½æ•ˆç”šè‡³æ€§èƒ½é—®é¢˜ã€‚<br>è„æ£€æŸ¥æœºåˆ¶åœ¨è®¾è®¡ä¸Šå­˜åœ¨çš„æ€§èƒ½é—®é¢˜ä¸€ç›´è¢«å¤§å®¶è¯Ÿç—…ï¼Œåœ¨ Angular2+ ä¸­å¼•å…¥äº†æ¨¡å—åŒ–ç»„ç»‡æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç”±äºåº”ç”¨çš„ç»„ç»‡ç±»æ˜¯æ ‘ç»“æ„çš„ï¼Œè„æ£€æŸ¥ä¼šä»æ ¹ç»„ä»¶å¼€å§‹ï¼Œè‡ªä¸Šè€Œä¸‹å¯¹æ ‘ä¸Šçš„æ‰€æœ‰å­ç»„ä»¶è¿›è¡Œæ£€æŸ¥ã€‚ç›¸æ¯” AngularJS ä¸­çš„å¸¦æœ‰ç¯çš„ç»“æ„ï¼Œè¿™æ ·çš„å•å‘æ•°æ®æµæ•ˆç‡æ›´é«˜ï¼Œè€Œä¸”å®¹æ˜“é¢„æµ‹ï¼Œæ€§èƒ½ä¸Šä¹Ÿæœ‰ä¸å°‘çš„æå‡ã€‚é™¤äº†æ¨¡å—åŒ–ç»„ç»‡ä¹‹å¤–ï¼ŒAngular2+ åŒæ—¶è¿˜å¼•å…¥äº† NgZoneï¼Œæå‡äº†è„æ£€æŸ¥çš„æ€§èƒ½ã€‚<br>åœ¨ Angular ä¸­é™¤äº†å¯¹è„æ£€æŸ¥æœºåˆ¶è¿›è¡Œäº†æ€§èƒ½ä¼˜åŒ–ï¼Œè¿˜æä¾›äº†å…¶ä»–çš„ä¼˜åŒ–æ‰‹æ®µï¼ŒAOT ç¼–è¯‘ä¾¿æ˜¯å…¶ä¸­ä¸€ç§ã€‚</p>

        <h5 id="ç”¨-AOT-è¿›è¡Œç¼–è¯‘"   >
          <a href="#ç”¨-AOT-è¿›è¡Œç¼–è¯‘" class="heading-link"><i class="fas fa-link"></i></a>ç”¨ AOT è¿›è¡Œç¼–è¯‘</h5>
      <p>Angular æä¾›äº†é¢„ç¼–è¯‘ï¼ˆAOTï¼‰èƒ½åŠ›ï¼Œæ— é¡»ç­‰å¾…åº”ç”¨é¦–æ¬¡ç¼–è¯‘ï¼Œä»¥åŠé€šè¿‡é¢„ç¼–è¯‘çš„æ–¹å¼ç§»é™¤ä¸éœ€è¦çš„åº“ä»£ç ã€å‡å°‘ä½“ç§¯ï¼Œè¿˜å¯ä»¥ææ—©æ£€æµ‹æ¨¡æ¿é”™è¯¯ã€‚<br>é™¤æ­¤ä¹‹å¤–ï¼ŒAngularæä¾›äº†å®Œå¤‡çš„ç»“æ„å’Œè§„èŒƒï¼Œæ–°åŠ å…¥çš„æˆå‘˜èƒ½å¾ˆå¿«åœ°é€šè¿‡å¤åˆ¶ç²˜è´´å®ŒæˆåŠŸèƒ½çš„å¼€å‘ã€‚å¥½çš„æ¶æ„è®¾è®¡ï¼Œèƒ½è®©é«˜çº§ç¨‹åºå‘˜å’Œåˆå…¥é—¨çš„ç¨‹åºå‘˜å†™å‡ºç›¸ä¼¼çš„ä»£ç ï¼ŒAngular é€šè¿‡ä¸¥æ ¼çš„è§„èŒƒçº¦æŸï¼Œæå‡äº†é¡¹ç›®çš„ç»´æŠ¤ä½“éªŒã€‚<br>ç”±äº Angular ç›®æ ‡æ˜¯æä¾›å¤§è€Œå…¨çš„è§£å†³æ–¹æ¡ˆï¼Œå› æ­¤ç›¸æ¯” Angularï¼ŒReactå’Œ Vueåˆ™æ›´ä¸“æ³¨äºç”¨æˆ·ç•Œé¢çš„æ„å»ºå’Œä¼˜åŒ–ï¼Œæˆ‘ä»¬ç»§ç»­æ¥çœ‹ä¸€ä¸‹ Reactã€‚</p>

        <h3 id="React"   >
          <a href="#React" class="heading-link"><i class="fas fa-link"></i></a>React</h3>
      <p>React å’Œ Vue éƒ½æ˜¯ä¸“æ³¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaSctipt åº“ï¼Œå®ƒä»¬ä¸å¼ºåˆ¶å¼•å…¥å¾ˆå¤šå·¥ç¨‹ç±»çš„åŠŸèƒ½ï¼Œä¹Ÿæ²¡æœ‰è¿‡å¤šçš„å¼ºä¾µå…¥æ€§çš„æ¦‚å¿µã€è¯­æ³•ç³–å’Œè®¾è®¡ï¼Œå› æ­¤å®ƒä»¬ç›¸å¯¹ Angular æœ€å¤§çš„ä¼˜åŠ¿æ˜¯è½»é‡ã€‚<br>è€Œå¯¹æ¯” Vueï¼ŒReact æœ€å¤§çš„ä¼˜ç‚¹æ˜¯çµæ´»ï¼Œå¯¹åŸç”Ÿ JavaScript çš„ä¾µå…¥æ€§å¼±ï¼ˆæ²¡æœ‰è¿‡å¤šçš„æ¨¡æ¿è¯­æ³•ï¼‰ï¼Œä¸éœ€è¦æŒæ¡å¤ªå¤šçš„API ä¹Ÿå¯ä»¥å¾ˆå¥½åœ°ä½¿ç”¨ã€‚<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹React ä¸­çš„ä¸€äº›æ ¸å¿ƒè®¾è®¡å’Œç‰¹è‰²ï¼Œé¦–é€‰ä¾¿æ˜¯è™šæ‹Ÿ DOMçš„è®¾è®¡ã€‚</p>

        <h5 id="è™šæ‹Ÿ-DOM"   >
          <a href="#è™šæ‹Ÿ-DOM" class="heading-link"><i class="fas fa-link"></i></a>è™šæ‹Ÿ DOM</h5>
      <p>è™šæ‹Ÿ DOM æ–¹æ¡ˆçš„å‡ºç°ï¼Œä¸»è¦ä¸ºäº†è§£å†³å‰ç«¯é¡µé¢é¢‘ç¹æ¸²æŸ“è¿‡ç¨‹ä¸­çš„æ€§èƒ½é—®é¢˜ã€‚è¯¥æ–¹æ¡ˆæœ€åˆç”± React æå‡ºï¼Œå¦‚ä»Šéšç€æœºå™¨æ€§èƒ½çš„æå‡ã€æ¡†æ¶ä¹‹é—´çš„ç›¸äº’å€Ÿé‰´ç­‰ï¼Œåœ¨å…¶ä»–æ¡†æ¶ï¼ˆæ¯”å¦‚ Vueï¼‰ä¸­ä¹Ÿéƒ½æœ‰ä½¿ç”¨ã€‚<br>è™šæ‹Ÿ DOMçš„è®¾è®¡ï¼Œå¤§æ¦‚å¯åˆ†æˆ 3 ä¸ªè¿‡ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬åˆ†åˆ«æ¥çœ‹çœ‹ã€‚<br>1.ç”¨JavaScript å¯¹è±¡æ¨¡æ‹Ÿ DOM æ ‘ï¼Œå¾—åˆ°ä¸€æ£µè™šæ‹Ÿ DOM æ ‘ã€‚<br>2.å½“é¡µé¢æ•°æ®å˜æ›´æ—¶ï¼Œç”Ÿæˆæ–°çš„è™šæ‹Ÿ DOM æ ‘ï¼Œæ¯”è¾ƒæ–°æ—§ä¸¤æ£µè™šæ‹Ÿ DOM æ ‘çš„å·®å¼‚ã€‚<br>3.æŠŠå·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„ DOM æ ‘ä¸Šã€‚<br>è™½ç„¶è™šæ‹Ÿ DOM è§£å†³äº†é¡µé¢è¢«é¢‘ç¹æ›´æ–°å’Œæ¸²æŸ“å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ï¼Œä½†ä¼ ç»Ÿè™šæ‹Ÿ DOM ä¾ç„¶æœ‰ä»¥ä¸‹æ€§èƒ½ç“¶é¢ˆï¼š<br>åœ¨å•ä¸ªç»„ä»¶å†…éƒ¨ä¾ç„¶éœ€è¦éå†è¯¥ç»„ä»¶çš„æ•´ä¸ªè™šæ‹Ÿ DOM æ ‘ï¼›<br>åœ¨ä¸€äº›ç»„ä»¶æ•´ä¸ªæ¨¡ç‰ˆå†…åªæœ‰å°‘é‡åŠ¨æ€èŠ‚ç‚¹çš„æƒ…å†µä¸‹ï¼Œè¿™äº›éå†éƒ½æ˜¯æ€§èƒ½çš„æµªè´¹ï¼›<br>é€’å½’éå†å’Œæ›´æ–°é€»è¾‘å®¹æ˜“å¯¼è‡´ UI æ¸²æŸ“è¢«é˜»å¡ï¼Œç”¨æˆ·ä½“éªŒä¸‹é™ã€‚<br>å¯¹æ­¤ï¼ŒReact æ¡†æ¶ä¹Ÿæœ‰è¿›è¡Œç›¸åº”çš„ä¼˜åŒ–ï¼šä½¿ç”¨ä»»åŠ¡è°ƒåº¦æ¥æ§åˆ¶çŠ¶æ€æ›´æ–°çš„è®¡ç®—å’Œæ¸²æŸ“ã€‚</p>

        <h5 id="çŠ¶æ€æ›´æ–°ï¼šä»»åŠ¡è°ƒåº¦"   >
          <a href="#çŠ¶æ€æ›´æ–°ï¼šä»»åŠ¡è°ƒåº¦" class="heading-link"><i class="fas fa-link"></i></a>çŠ¶æ€æ›´æ–°ï¼šä»»åŠ¡è°ƒåº¦</h5>
      <p>React ä¸­ä½¿ç”¨åè°ƒå™¨ï¼ˆReconcilerï¼‰ä¸æ¸²æŸ“å™¨ï¼ˆRendererï¼‰æ¥ä¼˜åŒ–é¡µé¢çš„æ¸²æŸ“æ€§èƒ½ã€‚<br>åœ¨ React é‡Œï¼Œå¯ä»¥ä½¿ç”¨ReactDOM.render/this.setState/this.forceUpdate/useStateç­‰æ–¹æ³•æ¥è§¦å‘çŠ¶æ€æ›´æ–°ï¼Œè¿™äº›æ–¹æ³•å…±ç”¨ä¸€å¥—çŠ¶æ€æ›´æ–°æœºåˆ¶ï¼Œè¯¥æ›´æ–°æœºåˆ¶ä¸»è¦ç”±ä¸¤ä¸ªæ­¥éª¤ç»„æˆã€‚<br>æ‰¾å‡ºå˜åŒ–çš„ç»„ä»¶ï¼Œæ¯å½“æœ‰æ›´æ–°å‘ç”Ÿæ—¶ï¼Œåè°ƒå™¨ä¼šåšå¦‚ä¸‹å·¥ä½œï¼š<br>è°ƒç”¨ç»„ä»¶renderæ–¹æ³•å°† JSX è½¬åŒ–ä¸ºè™šæ‹Ÿ DOMï¼›<br>è¿›è¡Œè™šæ‹Ÿ DOM Diff å¹¶æ‰¾å‡ºå˜åŒ–çš„è™šæ‹Ÿ DOMï¼›<br>é€šçŸ¥æ¸²æŸ“å™¨ã€‚<br>æ¸²æŸ“å™¨æ¥åˆ°åè°ƒå™¨é€šçŸ¥ï¼Œå°†å˜åŒ–çš„ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚<br>åœ¨ React15 åŠä»¥å‰ï¼Œåè°ƒå™¨åˆ›å»ºè™šæ‹Ÿ DOM ä½¿ç”¨çš„æ˜¯é€’å½’çš„æ–¹å¼ï¼Œè¯¥è¿‡ç¨‹æ˜¯æ— æ³•ä¸­æ–­çš„ã€‚è¿™ä¼šå¯¼è‡´ UI æ¸²æŸ“è¢«é˜»å¡ï¼Œé€ æˆå¡é¡¿ã€‚<br>ä¸ºæ­¤ï¼ŒReact16 ä¸­æ–°å¢äº†è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰ï¼Œè°ƒåº¦å™¨èƒ½å¤ŸæŠŠå¯ä¸­æ–­çš„ä»»åŠ¡åˆ‡ç‰‡å¤„ç†ï¼Œèƒ½å¤Ÿè°ƒæ•´ä¼˜å…ˆçº§ï¼Œé‡ç½®å¹¶å¤ç”¨ä»»åŠ¡ã€‚è°ƒåº¦å™¨ä¼šæ ¹æ®ä»»åŠ¡çš„ä¼˜å…ˆçº§å»åˆ†é…å„è‡ªçš„è¿‡æœŸæ—¶é—´ï¼Œåœ¨è¿‡æœŸæ—¶é—´ä¹‹å‰æŒ‰ç…§ä¼˜å…ˆçº§æ‰§è¡Œä»»åŠ¡ï¼Œå¯ä»¥åœ¨ä¸å½±å“ç”¨æˆ·ä½“éªŒçš„æƒ…å†µä¸‹å»è¿›è¡Œè®¡ç®—å’Œæ›´æ–°ã€‚<br>é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼ŒReact å¯åœ¨æµè§ˆå™¨ç©ºé—²çš„æ—¶å€™è¿›è¡Œè°ƒåº¦å¹¶æ‰§è¡Œä»»åŠ¡ï¼Œç¯‡å¹…å…³ç³»è¿™é‡Œä¸å†å±•å¼€ã€‚<br>è™šæ‹ŸDOMå’Œä»»åŠ¡è°ƒåº¦çš„çŠ¶æ€æ›´æ–°æœºåˆ¶ï¼Œæ˜¯ React ä¸­æ€§èƒ½ä¼˜åŒ–çš„ä¸¤ä¸ªé‡è¦è§£å†³æ–¹æ¡ˆã€‚<br>é™¤äº†æ€§èƒ½ä¼˜åŒ–ä»¥å¤–ï¼ŒReact çš„å‡ºç°åŒæ—¶å¸¦æ¥äº†ç‰¹åˆ«æ£’çš„ç†å¿µå’Œè®¾è®¡ï¼ŒåŒ…æ‹¬ jsxã€å‡½æ•°å¼ç¼–ç¨‹ã€Hooksç­‰ã€‚å…¶ä¸­ï¼Œå‡½æ•°å¼ç¼–ç¨‹çš„æ— å‰¯ä½œç”¨ç­‰ä¼˜åŠ¿å‘æ¥è¢«å¾ˆå¤šç¨‹åºå‘˜æ‰€æ¨å´‡ï¼ŒHooks çš„å‡ºç°æ›´æ˜¯å°† React çš„å‡½æ•°å¼ç¼–ç¨‹ç†å¿µæ¨å‘äº†æ›´é«˜å³°ã€‚<br>ç›¸æ¯”äº Angularï¼ŒReact çš„å…¥é—¨é—¨æ§›è¦ä½å¾ˆå¤šï¼Œä½†æåˆ°ç®€å•æ˜“å­¦ï¼Œå°±ä¸å¾—ä¸è¯´åˆ° Vueäº†ã€‚</p>

        <h3 id="Vue"   >
          <a href="#Vue" class="heading-link"><i class="fas fa-link"></i></a>Vue</h3>
      <p>Vue æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä¸Šæ‰‹ç®€å•ï¼Œæ¡†æ¶çš„è®¾è®¡å’Œæ–‡æ¡£å¯¹æ–°æ‰‹æå…¶å‹å¥½ã€‚ä½†è¿™å¹¶ä¸ä»£è¡¨å®ƒåªæ˜¯ä¸ªç®€å•çš„æ¡†æ¶ï¼Œå½“ä½ éœ€è¦å®ç°ä¸€äº›æ›´åŠ æ·±å…¥çš„è‡ªå®šä¹‰åŠŸèƒ½æ—¶ï¼ˆæ¯”å¦‚è‡ªå®šä¹‰ç»„ä»¶ã€è‡ªå®šä¹‰æŒ‡ä»¤ã€JSX ç­‰ï¼‰ï¼Œä½ ä¼šå‘ç°å®ƒä¹Ÿæä¾›äº†å‹å¥½çš„æ”¯æŒèƒ½åŠ›ã€‚<br>å¾ˆå¤šäººä¼šè®¤ä¸º Vue åªæ˜¯æŠŠ Angular å’Œ React çš„ä¼˜åŠ¿ç»“åˆï¼Œä½† Vue ä¹Ÿæœ‰è‡ªèº«çš„è®¾è®¡å’Œæ€è€ƒç‰¹è‰²ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬åŒæ ·ä»‹ç»ä¸€ä¸‹ Vue çš„è®¾è®¡ç‰¹ç‚¹ã€‚</p>

        <h5 id="è™šæ‹Ÿ-DOM-1"   >
          <a href="#è™šæ‹Ÿ-DOM-1" class="heading-link"><i class="fas fa-link"></i></a>è™šæ‹Ÿ DOM</h5>
      <p>å‰é¢æˆ‘ä»¬åœ¨ä»‹ç» Reactçš„è™šæ‹Ÿ DOMæ—¶ï¼Œæåˆ°ä¼ ç»Ÿè™šæ‹Ÿ DOMçš„æ€§èƒ½ç“¶é¢ˆï¼ŒVue 3.0 åŒæ ·ä¸ºæ­¤åšäº†äº›ä¼˜åŒ–ã€‚<br>åœ¨ Vue 3.0 ä¸­ï¼Œè™šæ‹Ÿ DOMé€šè¿‡åŠ¨é™ç»“åˆçš„æ¨¡å¼æ¥è¿›è¡Œçªç ´ï¼š<br>é€šè¿‡æ¨¡ç‰ˆé™æ€åˆ†æç”Ÿæˆæ›´ä¼˜åŒ–çš„è™šæ‹Ÿ DOM æ¸²æŸ“å‡½æ•°ï¼Œå°†æ¨¡ç‰ˆåˆ‡åˆ†ä¸ºå—ï¼ˆif/for/slot)ï¼›<br>æ›´æ–°æ—¶åªéœ€è¦ç›´æ¥éå†åŠ¨æ€èŠ‚ç‚¹ï¼Œè™šæ‹Ÿ DOMçš„æ›´æ–°æ€§èƒ½ä¸æ¨¡ç‰ˆå¤§å°è§£è€¦ï¼Œå˜ä¸ºä¸åŠ¨æ€èŠ‚ç‚¹çš„æ•°é‡ç›¸å…³ã€‚<br>å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œè™šæ‹Ÿ DOM çš„æ›´æ–°ä»ä»¥å‰çš„æ•´ä½“ä½œç”¨åŸŸè°ƒæ•´ä¸ºæ ‘çŠ¶ä½œç”¨åŸŸï¼Œæ ‘çŠ¶çš„ç»“æ„ä¼šå¸¦æ¥ç®—æ³•çš„ç®€åŒ–ä»¥åŠæ€§èƒ½çš„æå‡ã€‚</p>

        <h5 id="çŠ¶æ€æ›´æ–°ï¼š-getter-setterã€Proxy"   >
          <a href="#çŠ¶æ€æ›´æ–°ï¼š-getter-setterã€Proxy" class="heading-link"><i class="fas fa-link"></i></a>çŠ¶æ€æ›´æ–°ï¼š getter/setterã€Proxy</h5>
      <p>åœ¨ Vue 3.0 ä»¥å‰ï¼ŒVueä¸­çŠ¶æ€æ›´æ–°å®ç°ä¸»è¦ä¾èµ–äº†getter/setterï¼Œåœ¨æ•°æ®æ›´æ–°çš„æ—¶å€™å°±æ‰§è¡Œäº†æ¨¡æ¿æ›´æ–°ã€watchã€computedç­‰ä¸€äº›å·¥ä½œã€‚<br>ç›¸æ¯”äºä¹‹å‰çš„getter/setterç›‘æ§æ•°æ®å˜æ›´ï¼ŒVue 3.0 å°†ä¼šæ˜¯åŸºäºProxyçš„å˜åŠ¨ä¾¦æµ‹ï¼Œé€šè¿‡ä»£ç†çš„æ–¹å¼æ¥ç›‘æ§å˜åŠ¨ï¼Œæ•´ä½“æ€§èƒ½ä¼šå¾—åˆ°ä¼˜åŒ–ã€‚å½“æˆ‘ä»¬ç»™æŸä¸ªå¯¹è±¡æ·»åŠ äº†ä»£ç†ä¹‹åï¼Œå°±å¯ä»¥æ”¹å˜ä¸€äº›åŸæœ‰çš„è¡Œä¸ºï¼Œæˆ–æ˜¯é€šè¿‡é’©å­çš„æ–¹å¼æ·»åŠ ä¸€äº›å¤„ç†ï¼Œç”¨æ¥è§¦å‘ç•Œé¢æ›´æ–°ã€å…¶ä»–æ•°æ®æ›´æ–°ç­‰ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚<br>å¯¹æ¯” Angularï¼ŒVue æ›´åŠ è½»é‡ã€å…¥é—¨å®¹æ˜“ã€‚å¯¹æ¯” Reactï¼ŒVue åˆ™æ›´ä¸“æ³¨äºæ¨¡æ¿ç›¸å…³ï¼Œæä¾›äº†ä¾¿åˆ©å’Œæ˜“è¯»çš„æ¨¡æ¿è¯­æ³•ï¼Œå¼€å‘è€…ç†Ÿç»ƒæŒæ¡è¿™äº›è¯­æ³•ä¹‹åï¼Œå¯å¿«é€Ÿé«˜æ•ˆåœ°æ­å»ºèµ·å‰ç«¯é¡µé¢ã€‚åŒæ—¶ï¼ŒVueä¹Ÿåœ¨ä¸æ–­åœ°è¿›è¡Œè‡ªæˆ‘æ¼”åŒ–ï¼Œè¿™äº›æˆ‘ä»¬ä¹Ÿèƒ½ä» Vue 3.0 çš„å“åº”å¼è®¾è®¡ã€æ¨¡å—åŒ–æ¶æ„ã€æ›´ä¸€è‡´çš„API è®¾è®¡ç­‰è®¾è®¡ä¸­è§‚å¯Ÿåˆ°ã€‚</p>

        <h4 id="å°ç»“"   >
          <a href="#å°ç»“" class="heading-link"><i class="fas fa-link"></i></a>å°ç»“</h4>
      <p>å‰ç«¯æ¡†æ¶å¾ˆå¤§ç¨‹åº¦åœ°æå‡äº†å‰ç«¯çš„å¼€å‘æ•ˆç‡ï¼ŒåŒæ—¶æä¾›äº†å„ç§åœºæ™¯ä¸‹çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿å¾—å‰ç«¯å¼€å‘å¯ä»¥ä¸“æ³¨äºå¿«é€Ÿæ‹“å±•åŠŸèƒ½å’Œä¸šåŠ¡å®ç°ã€‚ã€‚å…¶ä¸­ï¼ŒAngular å±äºé€‚åˆå¤§å‹å‰ç«¯é¡¹ç›®çš„â€œå¤§è€Œå…¨â€çš„æ¡†æ¶ï¼Œè€Œ React/Vue åˆ™æ˜¯è½»é‡çµæ´»çš„åº“ï¼Œå®ƒä»¬å„æœ‰å„çš„è®¾è®¡ç‰¹ç‚¹ã€‚<br>å¯¹äºæ¡†æ¶çš„å‡çº§ï¼ŒReact é€‰æ‹©äº†æ¸è¿›å…¼å®¹çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œè€Œ Angular/Vue éƒ½æ›¾ç»å†è¿‡â€œæ–­å´–å¼â€çš„ç‰ˆæœ¬å‡çº§ã€‚</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/06/26/es2021%E6%96%B0%E7%89%B9%E6%80%A7/">ES2021æ–°ç‰¹æ€§</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-06-26</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>ECMAScript 2021 æ–°ç‰¹æ€§</p>
<p>1 String.prototype.replaceAll()<br>åœ¨JavaScriptä¸­ï¼Œreplace()æ–¹æ³•åªæ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå®ä¾‹ã€‚å¦‚æœæˆ‘ä»¬æƒ³æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰åŒ¹é…é¡¹ï¼Œå”¯ä¸€çš„åŠæ³•å°±ä½¿ç”¨å…¨å±€æ­£åˆ™è¡¨è¾¾å¼ã€‚<br>æ–°ç‰¹æ€§replaceAll()ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„åŒ¹é…é¡¹éƒ½ä¼šè¢«æ›¿æ¢æ‰ã€‚æ¨¡å¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ›¿æ¢çš„å†…å®¹å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ˜¯ä¸ºæ¯ä¸ªåŒ¹é…é¡¹æ‰§è¡Œçš„å‡½æ•°ã€‚</p>
<p>åŸæœ¬çš„replace()åªèƒ½æ›¿æ¢æ‰ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">"å®¡æ‰¹ å®¡æ‰¹ å®¡æ‰¹ å®¡æ‰¹ "</span></span><br><span class="line"><span class="keyword">const</span> newStr = str.replace(<span class="string">"å®¡æ‰¹"</span>, <span class="string">"äººäº‹"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(newStr) <span class="comment">// äººäº‹ å®¡æ‰¹ å®¡æ‰¹ å®¡æ‰¹</span></span><br></pre></td></tr></table></div></figure>
<p>å¦‚æœæƒ³è¦å®Œå…¨åŒ¹é…æ›¿æ¢éœ€è¦å†™å…¨å±€æ­£åˆ™è¡¨è¾¾å¼ï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">"å®¡æ‰¹ å®¡æ‰¹ å®¡æ‰¹ å®¡æ‰¹"</span></span><br><span class="line"><span class="keyword">const</span> newStr = str.replace(<span class="regexp">/å®¡æ‰¹/g</span>, <span class="string">"äººäº‹"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(newStr) <span class="comment">// äººäº‹ äººäº‹ äººäº‹ äººäº‹</span></span><br></pre></td></tr></table></div></figure>
<p>æ–°çš„replaceAll()ç‰¹æ€§ï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">"å®¡æ‰¹ å®¡æ‰¹ å®¡æ‰¹ å®¡æ‰¹"</span></span><br><span class="line"><span class="keyword">const</span> newStr = str.replaceAll(<span class="string">"å®¡æ‰¹"</span>, <span class="string">"äººäº‹"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(newStr) <span class="comment">//äººäº‹ äººäº‹ äººäº‹ äººäº‹</span></span><br></pre></td></tr></table></div></figure>

<p>2 Promise.any<br>ES2020å·²ç»é€šè¿‡äº†Promiseçš„allSettled()æ–¹æ³•ã€‚ES2021 Promiseé˜µè¥å°†æœ‰ä¸€ä¸ªæ–°çš„æˆå‘˜ï¼Œany()ã€‚<br>å½“Promiseåˆ—è¡¨ä¸­çš„ä»»æ„ä¸€ä¸ªpromiseæˆåŠŸresolveåˆ™ä¼šçŸ­è·¯å¹¶è¿”å›ç¬¬ä¸€ä¸ªresolveçš„ç»“æœçŠ¶æ€ï¼Œ å¦‚æœæ‰€æœ‰çš„promiseå‡rejectï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸AggregateErrorï¼Œè¡¨ç¤ºæ‰€æœ‰è¯·æ±‚å¤±è´¥ã€‚<br>Promise.any()ä¸Promise.race()ååˆ†å®¹æ˜“æ··æ·†ï¼ŒåŠ¡å¿…æ³¨æ„åŒºåˆ†ã€‚Promise.race() ä¸€æ—¦æŸä¸ªpromiseè§¦å‘äº†resolveæˆ–è€…rejectï¼Œå°±ç›´æ¥è¿”å›äº†è¯¥çŠ¶æ€çš„ç»“æœã€‚<br>å³ä½¿Promiseåœ¨resolveçš„ä¹‹å‰è¢«rejectï¼ŒPromise.any()ä»å°†è¿”å›ç¬¬ä¸€ä¸ªresolveçš„ç»“æœï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.any([</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> setTimeout(reject(<span class="string">'workflow'</span>), <span class="number">100</span>)),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> setTimeout(resolve(<span class="string">'staff'</span>), <span class="number">1000</span>)),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> setTimeout(resolve(<span class="string">'holiday'</span>), <span class="number">2000</span>))</span><br><span class="line">])</span><br><span class="line">    .then(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`ç»“æœï¼š<span class="subst">$&#123;value&#125;</span>`</span>)) <span class="comment">// ç»“æœï¼šstaff</span></span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="built_in">console</span>.log(err));</span><br></pre></td></tr></table></div></figure>
<p>å½“æ‰€æœ‰promiseéƒ½ä¸ºrejectä¼šæŠ›å‡ºå¼‚å¸¸AggregateError: All promises were rejectedï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.any([</span><br><span class="line">    <span class="built_in">Promise</span>.reject(<span class="string">'Error one'</span>),</span><br><span class="line">    <span class="built_in">Promise</span>.reject(<span class="string">'Error two'</span>),</span><br><span class="line">    <span class="built_in">Promise</span>.reject(<span class="string">'Error three'</span>)</span><br><span class="line">])</span><br><span class="line">    .then(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`ç»“æœï¼š<span class="subst">$&#123;value&#125;</span>`</span>))</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="built_in">console</span>.log(err)); <span class="comment">// AggregateError: All promises were rejected</span></span><br></pre></td></tr></table></div></figure>
<p>3 é€»è¾‘è¿ç®—ç¬¦å’Œèµ‹å€¼è¡¨è¾¾å¼<br>åœ¨JavaScriptä¸­ï¼Œæœ‰å¾ˆå¤šèµ‹å€¼æ“ä½œç¬¦å’Œé€»è¾‘æ“ä½œç¬¦ï¼Œåœ¨æ–°çš„è‰æ¡ˆä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç»„åˆé€»è¾‘è¿ç®—ç¬¦å’Œèµ‹å€¼è¿ç®—ç¬¦ã€‚<br>a &amp;&amp;= b å½“aå€¼å­˜åœ¨æ—¶ï¼Œå°†bå˜é‡èµ‹å€¼ç»™aï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a &amp;&amp;= b</span><br><span class="line"><span class="comment">//ç­‰ä»·äº</span></span><br><span class="line"><span class="comment">// 1. a &amp;&amp; (a = b)</span></span><br><span class="line"><span class="comment">// 2. if (a) a = b</span></span><br></pre></td></tr></table></div></figure>
<p>a ||= b å½“aå€¼ä¸å­˜åœ¨æ—¶ï¼Œå°†bå˜é‡èµ‹å€¼ç»™aï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a ||= b</span><br><span class="line"><span class="comment">//ç­‰ä»·äº</span></span><br><span class="line"><span class="comment">// 1. a || (a = b)</span></span><br><span class="line"><span class="comment">// 2. if (!a) a = b</span></span><br></pre></td></tr></table></div></figure>
<p>a ??= b å½“aå€¼ä¸ºnullæˆ–è€…undefinedæ—¶ï¼Œå°†bå˜é‡èµ‹å€¼ç»™aï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">10</span></span><br><span class="line">a ??= b</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line">a = <span class="literal">false</span></span><br><span class="line">a ??= b</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> navigations = [</span><br><span class="line">    &#123;</span><br><span class="line">        title: <span class="string">'å·¥ä½œå°'</span>,</span><br><span class="line">        path: <span class="string">'/'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        title: <span class="string">'å®¡æ‰¹'</span>,</span><br><span class="line">        path: <span class="string">'/workflow'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: <span class="string">'/setting'</span></span><br><span class="line">    &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> navigation <span class="keyword">of</span> navigations) &#123;</span><br><span class="line">    page.title ??= <span class="string">'é»˜è®¤'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.table(pages);</span><br><span class="line"></span><br><span class="line"><span class="comment">//   (index)            title                     path</span></span><br><span class="line"><span class="comment">//   0                  "å·¥ä½œå°"           "/"</span></span><br><span class="line"><span class="comment">//   1                  "å®¡æ‰¹"                "/workflow"</span></span><br><span class="line"><span class="comment">//   2                  "é»˜è®¤"                "/setting"</span></span><br></pre></td></tr></table></div></figure>
<p>4 Private Methods &amp; Private Accessors</p>
<p>4.1 ç§æœ‰æ–¹æ³• Private Methods</p>
<p>ç§æœ‰æ–¹æ³•åªèƒ½åœ¨å®šä¹‰å®ƒçš„ç±»å†…éƒ¨è®¿é—®ï¼Œä¸“ç”¨æ–¹æ³•åç§°ä»¥#å¼€å¤´ã€‚ç”±äºsetType()æ˜¯ç§æœ‰æ–¹æ³•ï¼Œæ‰€ä»¥personObj.setTypeè¿”å›undefinedï¼Œç”¨undefinedä½œå‡½æ•°ä¼šå¼•å‘TypeErrorã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Private method</span></span><br><span class="line">    ï»¿#setType() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Private'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Public method</span></span><br><span class="line">    show() &#123;</span><br><span class="line">        this.#setType();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> personObj = <span class="keyword">new</span> Person();</span><br><span class="line">personObj.show(); <span class="comment">// "Private"</span></span><br><span class="line">personObj.setType(); <span class="comment">// TypeError: personObj.setType is not a function</span></span><br></pre></td></tr></table></div></figure>
<p>4.2 ç§æœ‰è®¿é—®è€… Private Accessors</p>
<p>å¯ä»¥é€šè¿‡åœ¨å‡½æ•°åç§°å‰æ·»åŠ #ï¼Œä½¿å¾—è®¿é—®å™¨å‡½æ•°ç§æœ‰ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œnameæ˜¯å…¬å…±çš„ï¼Œå¯ä»¥åƒæ™®é€šå±æ€§ä¸€æ ·è¯»å–å®ƒ, è€Œageåˆ™æ˜¯ç§æœ‰ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Public accessor</span></span><br><span class="line">    ï»¿<span class="keyword">get</span> name() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'able'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> name(value) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Private accessor</span></span><br><span class="line">ï»¿    <span class="keyword">get</span> #age() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">18</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> #age(value) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> personObj = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="built_in">console</span>.log(personObj.name); <span class="comment">// "able"</span></span><br><span class="line"><span class="built_in">console</span>.log(personObj.age); <span class="comment">// undefined</span></span><br></pre></td></tr></table></div></figure>
<p>5 WeakRefs</p>
<p>å½“æˆ‘ä»¬é€šè¿‡const, let, varåˆ›å»ºä¸€ä¸ªå˜é‡æ—¶ï¼Œåƒåœ¾æ”¶é›†å™¨GCå°†æ°¸è¿œä¸ä¼šä»å†…å­˜ä¸­åˆ é™¤è¯¥å˜é‡ï¼Œåªè¦å®ƒçš„å¼•ç”¨ä»ç„¶å­˜åœ¨ä¸”å¯è®¿é—®ã€‚è€ŒWeakRefå¯¹è±¡åŒ…å«é’ˆå¯¹å¯¹è±¡çš„å¼±å¼•ç”¨ï¼Œé’ˆå¯¹å¯¹è±¡çš„å¼±å¼•ç”¨æ˜¯ä¸ä¼šé˜»æ­¢åƒåœ¾æ”¶é›†å™¨GCçš„å›æ”¶çš„ï¼Œåˆ™GCå¯ä»¥åœ¨ä»»ä½•æ—¶å€™åˆ é™¤å®ƒã€‚</p>
<p>ä¾‹å¦‚æœ‰å¦‚ä¸‹åœºæ™¯ï¼š<br>è·Ÿè¸ªæŸä¸ªå¯¹è±¡è°ƒç”¨æŸä¸€ç‰¹å®šæ–¹æ³•çš„æ¬¡æ•°ï¼Œè¶…è¿‡1000æ¡åˆ™åšå¯¹åº”æç¤ºã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨Mapï¼Œè™½ç„¶å¯ä»¥å®ç°éœ€æ±‚ï¼Œä½†æ˜¯ä¼šå‘ç”Ÿå†…å­˜æº¢å‡ºï¼Œå› ä¸ºä¼ é€’ç»™doSomething()çš„æ¯ä¸ªå¯¹è±¡éƒ½æ°¸ä¹…ä¿å­˜åœ¨mapä¸­ï¼Œå¹¶ä¸”ä¸ä¼šè¢«GCå›æ”¶ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    doSomething(obj);</span><br><span class="line">    <span class="keyword">let</span> called = map.get(obj) || <span class="number">0</span>;</span><br><span class="line">    called++;</span><br><span class="line">    <span class="keyword">if</span> (called &gt; <span class="number">1000</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'è°ƒç”¨æ¬¡æ•°å·²è¶…è¿‡1000æ¬¡'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    map.set(obj, called);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>æ‰€ä»¥ï¼Œå¯ä»¥é€šè¿‡WeakMap()æˆ–è€…WeakSet()æ¥ä½¿ç”¨WeakRefsã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> wmap = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    doSomething(obj);</span><br><span class="line">    <span class="keyword">let</span> called = wmap.get(obj) || <span class="number">0</span>;</span><br><span class="line">    called++;</span><br><span class="line">    <span class="keyword">if</span> (called &gt; <span class="number">1000</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'è°ƒç”¨æ¬¡æ•°å·²è¶…è¿‡1000æ¬¡'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    wmap.set(obj, called);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>å› ä¸ºæ˜¯å¼±å¼•ç”¨ï¼Œæ‰€ä»¥WeakMapã€WeakSetçš„é”®å€¼å¯¹æ˜¯ä¸å¯æšä¸¾çš„ã€‚WeakSetå’ŒWeakMapç›¸ä¼¼ï¼Œä½†æ˜¯æ¯ä¸ªå¯¹è±¡åœ¨WeakSetä¸­åªå¯èƒ½å‡ºç°ä¸€æ¬¡ï¼ŒWeakSetä¸­æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯å”¯ä¸€çš„ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ws = <span class="keyword">new</span> <span class="built_in">WeakSet</span>();</span><br><span class="line"><span class="keyword">let</span> foo = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> bar = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">ws.add(foo);</span><br><span class="line">ws.add(bar);</span><br><span class="line"></span><br><span class="line">ws.has(foo); <span class="comment">// true</span></span><br><span class="line">ws.has(bar); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">ws.delete(foo); <span class="comment">// åˆ é™¤fooå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">ws.has(foo); <span class="comment">//false fooå·²åˆ é™¤</span></span><br><span class="line">ws.has(bar); <span class="comment">// barä»å­˜åœ¨</span></span><br></pre></td></tr></table></div></figure>
<p>WeakSetä¸Setç›¸æ¯”æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŒºåˆ«ï¼š<br>ï‚·WeakSetåªèƒ½æ˜¯å¯¹è±¡é›†åˆï¼Œè€Œä¸èƒ½æ˜¯ä»»ä½•ç±»å‹çš„ä»»æ„å€¼<br>ï‚·WeakSetå¼±å¼•ç”¨ï¼Œé›†åˆä¸­å¯¹è±¡å¼•ç”¨ä¸ºå¼±å¼•ç”¨ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–å¯¹WeakSetå¯¹è±¡çš„å¼•ç”¨ï¼Œåˆ™ä¼šè¢«GCå›æ”¶</p>
<p>æœ€åï¼ŒWeakRefå®ä¾‹æœ‰ä¸€ä¸ªæ–¹æ³•deref()ï¼Œè¿”å›å¼•ç”¨çš„åŸå§‹å¯¹è±¡ï¼Œå¦‚æœåŸå§‹å¯¹è±¡è¢«å›æ”¶ï¼Œåˆ™è¿”å›undefinedã€‚ä¸‹é¢å…¶åœ¨æ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—ä¸­ç¼“å­˜çš„å¦™ç”¨ï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cache = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> setValue = <span class="function">(<span class="params">key, obj</span>) =&gt;</span> &#123;</span><br><span class="line">    cache.set(key, <span class="keyword">new</span> WeakRef(obj));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getValue = <span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> ref = cache.get(key);</span><br><span class="line">    <span class="keyword">if</span> (ref) &#123;</span><br><span class="line">        <span class="keyword">return</span> ref.deref();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fibonacciCached = <span class="function">(<span class="params">number</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> cached = getValue(number);</span><br><span class="line">    <span class="keyword">if</span> (cached) <span class="keyword">return</span> cached;</span><br><span class="line">    <span class="keyword">const</span> sum = calculateFibonacci(number);</span><br><span class="line">    setValue(number, sum);</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/04/24/%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BB%A3%E7%A0%81%E6%B2%A1%E6%9C%89%E6%8C%89%E7%BC%96%E5%86%99%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C/">ä¸ºä»€ä¹ˆä»£ç æ²¡æœ‰æŒ‰ç¼–å†™é¡ºåºæ‰§è¡Œ</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-04-24</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>å‰ç«¯å·¥ç¨‹å¸ˆç®—æ˜¯æœ€å¹¸è¿çš„è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œå› ä¸ºä»ä¸€å¼€å§‹å°±å¯ä»¥æ¥è§¦åˆ°â€œå¼‚æ­¥â€è¿™ç§é«˜çº§ç‰¹æ€§ï¼Œæ¯”å¦‚ DOM äº‹ä»¶ã€AJAX è¯·æ±‚åŠå®šæ—¶å™¨ï¼›åŒæ—¶ä¹Ÿæ˜¯æœ€ä¸å¹¸çš„è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œå› ä¸ºå…¥é—¨ JavaScript çš„æ—¶å€™å°±è¦ä¹ æƒ¯å¼‚æ­¥è¿™ç§é«˜éš¾åº¦çš„å¼€å‘æ–¹å¼ï¼Œå¼‚æ­¥ç»å¸¸ä¼šå¯¼è‡´è¾“å‡ºçš„ç»“æœä¸æˆ‘ä»¬çš„é¢„æœŸä¸ä¸€è‡´ã€‚</p>

        <h4 id="å¼‚æ­¥å’ŒåŒæ­¥"   >
          <a href="#å¼‚æ­¥å’ŒåŒæ­¥" class="heading-link"><i class="fas fa-link"></i></a>å¼‚æ­¥å’ŒåŒæ­¥</h4>
      <p>è¿™ä¸¤ä¸ªæ¦‚å¿µå¤§å®¶åº”è¯¥éƒ½æ¯”è¾ƒç†Ÿæ‚‰å•¦ï¼Œç®€å•è§£é‡Šä¸€ä¸‹ï¼Œè¦æ¯”è¾ƒåŒæ­¥å’Œå¼‚æ­¥ï¼Œå¯ä»¥å°†è°ƒç”¨å‡½æ•°çš„è¿‡ç¨‹åˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ‰§è¡Œæ“ä½œå’Œè¿”å›ç»“æœã€‚ç¨‹åºåœ¨åŒæ­¥è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œä¼šç«‹å³æ‰§è¡Œæ“ä½œå¹¶ç­‰å¾…å¾—åˆ°è¿”å›ç»“æœåå†ç»§ç»­è¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´åŒæ­¥æ‰§è¡Œæ˜¯é˜»å¡çš„ã€‚è€Œå¼‚æ­¥ä¼šå°†æ“ä½œå’Œç»“æœåœ¨æ—¶é—´ä¸Šåˆ†éš”å¼€æ¥ï¼Œåœ¨å½“ä¸‹æ‰§è¡Œæ“ä½œï¼Œåœ¨æœªæ¥æŸä¸ªæ—¶åˆ»è¿”å›ç»“æœï¼Œåœ¨è¿™ä¸ªç­‰å¾…è¿”å›ç»“æœçš„è¿‡ç¨‹ä¸­ï¼Œç¨‹åºå°†ç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ã€‚ä¹Ÿå°±æ˜¯è¯´å¼‚æ­¥æ‰§è¡Œæ˜¯éé˜»å¡çš„ã€‚è¿™é‡Œå°±ä¸ä¸¾ğŸŒ°å•¦ã€‚</p>

        <h4 id="å¼‚æ­¥ä¸å›è°ƒ"   >
          <a href="#å¼‚æ­¥ä¸å›è°ƒ" class="heading-link"><i class="fas fa-link"></i></a>å¼‚æ­¥ä¸å›è°ƒ</h4>
      <p>æˆ‘ä»¬ç»å¸¸è°ƒç”¨ JavaScript çš„å¼‚æ­¥å‡½æ•°å¯èƒ½ä¼šè®¤ä¸ºï¼šå¼‚æ­¥æ“ä½œéƒ½é‡‡ç”¨å›è°ƒå‡½æ•°çš„å½¢å¼ã€‚æ¯•ç«Ÿä»æµè§ˆå™¨ç«¯çš„ DOM äº‹ä»¶ã€AJAX è¯·æ±‚ã€å®šæ—¶å™¨åˆ° Node.js ç«¯çš„æ–‡ä»¶è¯»å†™ã€å¤šè¿›ç¨‹ï¼Œéƒ½æ˜¯é‡‡ç”¨çš„å›è°ƒå½¢å¼ã€‚é‚£ä¹ˆè¿˜ä¼šæœ‰å…¶ä»–caseå˜›ï¼Œä¸ŠğŸŒ°ã€‚<br>ä¸‹é¢æ˜¯ä¸€æ®µç®€å•çš„ä»£ç ï¼Œå®šä¹‰äº†ä¸€ä¸ª JSON å¯¹è±¡ aï¼Œç„¶åæŠŠå®ƒæ‰“å°åˆ°æ§åˆ¶å°ï¼Œæœ€åå†å°†å¯¹è±¡ a çš„ couter.index å±æ€§å€¼è‡ªå¢ 1ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  counter: &#123;</span><br><span class="line">    index: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log( a ); <span class="comment">// ?</span></span><br><span class="line">a.counter.index++;</span><br></pre></td></tr></table></div></figure>
<p>æˆ‘ä»¬åœ¨æ§åˆ¶å°é‡Œçœ‹ä¸€ä¸‹ï¼Œç»“æœå¯èƒ½å’Œæˆ‘ä»¬çš„é¢„æœŸä¸ä¸€è‡´ï¼Œè¾“å‡ºäº†ä¸€ä¸ªJSON å¯¹è±¡ï¼š{conter:{index: 2}}ã€‚åŸå› åœ¨äºæµè§ˆå™¨åœ¨è¿è¡Œä»£ç çš„æ—¶å€™ï¼ŒæŠŠæ§åˆ¶å°æ‰“å°è¿™ç§æ¶‰åŠ I/O çš„æ“ä½œè¿›è¡Œäº†å»¶è¿Ÿæ‰§è¡Œã€‚å¯èƒ½æœ‰äººä¼šæ¨æµ‹æ˜¯ä¸æ˜¯æ§åˆ¶å°æ‰“å°çš„åªæ˜¯å°†å¯¹è±¡ a è¿›è¡Œäº†ç±»ä¼¼â€œæµ…æ‹·è´â€çš„æ“ä½œï¼Œå¦å®šè¿™ç§çŒœæƒ³å¾ˆç®€å•ï¼Œæ­¤æ—¶å†æ‰§è¡Œä¸€æ¬¡è‡ªå¢æ“ä½œï¼Œå°±ä¼šå‘ç°è¢«æ‰“å°çš„å¯¹è±¡å€¼å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚<br>æ—¢ç„¶å¹¶éæ‰€æœ‰å¼‚æ­¥éƒ½å›è°ƒï¼Œé‚£ä¹ˆåè¿‡æ¥ï¼Œæ˜¯å¦æ‰€æœ‰å›è°ƒå‡½æ•°éƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œçš„å‘¢ï¼Ÿç­”æ¡ˆä¹Ÿæ˜¯å¦å®šçš„ã€‚æ¯”å¦‚æ•°ç»„åŸå‹å‡½æ•° forEachï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯ this æŒ‡å‘çš„å¯¹è±¡ï¼Œè¿™é‡Œçš„å›è°ƒå°±æ˜¯åŒæ­¥çš„ã€‚</p>

        <h4 id="å¼‚æ­¥åŸç†"   >
          <a href="#å¼‚æ­¥åŸç†" class="heading-link"><i class="fas fa-link"></i></a>å¼‚æ­¥åŸç†</h4>
      <p>å›é¡¾äº†å¼‚æ­¥çš„åŸºç¡€æ¦‚å¿µï¼Œä¸‹é¢å°±æ¥æ·±å…¥è®²è§£å¼‚æ­¥çš„åŸç†ã€‚</p>

        <h5 id="äº‹ä»¶å¾ªç¯"   >
          <a href="#äº‹ä»¶å¾ªç¯" class="heading-link"><i class="fas fa-link"></i></a>äº‹ä»¶å¾ªç¯</h5>
      <p>å¯¹äºå¤§å¤šæ•°è¯­è¨€è€Œè¨€ï¼Œå®ç°å¼‚æ­¥ä¼šé€šè¿‡å¯åŠ¨é¢å¤–çš„è¿›ç¨‹ã€çº¿ç¨‹æˆ–åç¨‹æ¥å®ç°ï¼Œè€Œæˆ‘ä»¬åœ¨å‰é¢å·²ç»æåˆ°è¿‡ï¼ŒJavaScript æ˜¯å•çº¿ç¨‹çš„ã€‚ä¸ºä»€ä¹ˆå•çº¿ç¨‹è¿˜èƒ½å®ç°å¼‚æ­¥å‘¢ï¼Ÿå…¶å®ä¹Ÿæ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„é»‘é­”æ³•ï¼Œåªæ˜¯æŠŠä¸€äº›æ“ä½œäº¤ç»™äº†å…¶ä»–çº¿ç¨‹å¤„ç†ï¼Œç„¶åé‡‡ç”¨äº†ä¸€ç§ç§°ä¹‹ä¸ºâ€œäº‹ä»¶å¾ªç¯â€ï¼ˆä¹Ÿç§°â€œäº‹ä»¶è½®è¯¢â€ï¼‰çš„æœºåˆ¶æ¥å¤„ç†è¿”å›ç»“æœã€‚<br>ä¸‹é¢æˆ‘ä»¬ç”¨ä¸€æ®µç®€åŒ–çš„ä»£ç ï¼Œæ¥æè¿°äº‹ä»¶å¾ªç¯æœºåˆ¶ã€‚<br>æ•°ç»„ eventLoop è¡¨ç¤ºäº‹ä»¶é˜Ÿåˆ—ï¼ˆä¹Ÿæœ‰ç§°ä½œâ€œä»»åŠ¡é˜Ÿåˆ—â€ï¼‰ï¼Œç”¨æ¥å­˜æ”¾éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡äº‹ä»¶ï¼ˆå¯ä»¥ç†è§£ä¸ºå›è°ƒå‡½æ•°ï¼‰ï¼Œå¯¹è±¡ event å˜é‡è¡¨ç¤ºå½“å‰éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡äº‹ä»¶ã€‚ç”¨ä¸€ä¸ªæ°¸ä¸åœæ­¢çš„ while å¾ªç¯æ¥è¡¨ç¤ºäº‹ä»¶å¾ªç¯ï¼Œæ¯ä¸€æ¬¡å¾ªç¯ç§°ä¸ºä¸€ä¸ª tickã€‚å¯¹æ¯ä¸ª tick è€Œè¨€ï¼Œå¦‚æœåœ¨é˜Ÿåˆ—ä¸­æœ‰ç­‰å¾…äº‹ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šä»é˜Ÿåˆ—ä¸­è·å–ä¸€ä¸ªäº‹ä»¶å¹¶æ‰§è¡Œï¼Œè¿™äº›äº‹ä»¶é€šå¸¸æ˜¯å›è°ƒå‡½æ•°çš„å½¢å¼ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> eventLoop = []; <span class="comment">// äº‹ä»¶é˜Ÿåˆ—ï¼Œå…ˆè¿›å…ˆå‡º</span></span><br><span class="line"><span class="keyword">var</span> event; <span class="comment">// äº‹ä»¶æ‰§è¡ŒæˆåŠŸçš„å›è°ƒå›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="comment">// ä¸€æ¬¡tick</span></span><br><span class="line">  <span class="keyword">if</span> (eventLoop.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// é˜Ÿåˆ—ä¸­å–å‡ºå›è°ƒå‡½æ•°</span></span><br><span class="line">    event = eventLoop.shift();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      event();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      reportError(err);Â </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>é‚£ä¹ˆè¿™ä¸ªäº‹ä»¶é˜Ÿåˆ—é‡Œçš„äº‹ä»¶æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿä»¥ AJAX è¯·æ±‚ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬å‘å‡ºä¸€ä¸ª AJAX è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šå°†è¯·æ±‚ä»»åŠ¡åˆ†æ´¾ç»™ç½‘ç»œçº¿ç¨‹æ¥è¿›è¡Œå¤„ç†ï¼Œå½“å¯¹åº”çš„ç½‘ç»œçº¿ç¨‹æ‹¿åˆ°è¿”å›çš„æ•°æ®ä¹‹åï¼Œå°±ä¼šæŠŠå›è°ƒå‡½æ•°æ’å…¥åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚setTimeout å’Œ setInterval ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ setTimeout çš„æ—¶å€™å¹¶ä¸æ˜¯ç›´æ¥æŠŠå›è°ƒå‡½æ•°æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚å®ƒæ‰€åšçš„æ˜¯äº¤ç»™å®šæ—¶å™¨çº¿ç¨‹æ¥å¤„ç†ï¼Œå½“å®šæ—¶å™¨åˆ°æ—¶åï¼Œå†æŠŠå›è°ƒå‡½æ•°æ”¾åœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œè¿™æ ·ï¼Œåœ¨æœªæ¥çš„æŸè½® tick ä¸­è·å–å¹¶æ‰§è¡Œè¿™ä¸ªå›è°ƒå‡½æ•°ã€‚è¿™ä¹ˆåšæœ‰ä¸€ä¸ªéšæ€§çš„é—®é¢˜ï¼Œå¦‚æœäº‹ä»¶é˜Ÿåˆ—ä¸­å·²ç»æœ‰å…¶ä»–äº‹ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªå›è°ƒå°±ä¼šæ’é˜Ÿç­‰å¾…ã€‚æ‰€ä»¥è¯´ setTimeout/setInterval å®šæ—¶å™¨çš„ç²¾åº¦å¹¶ä¸é«˜ã€‚å‡†ç¡®åœ°è¯´ï¼Œå®ƒåªèƒ½ç¡®ä¿å›è°ƒå‡½æ•°ä¸ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”ä¹‹å‰è¿è¡Œï¼Œä½†å¯èƒ½ä¼šåœ¨é‚£ä¸ªæ—¶åˆ»è¿è¡Œï¼Œä¹Ÿå¯èƒ½åœ¨é‚£ä¹‹åè¿è¡Œï¼Œè¿™å°±è¦æ ¹æ®äº‹ä»¶é˜Ÿåˆ—çš„çŠ¶æ€è€Œå®šã€‚</p>

        <h5 id="äº‹ä»¶é˜Ÿåˆ—"   >
          <a href="#äº‹ä»¶é˜Ÿåˆ—" class="heading-link"><i class="fas fa-link"></i></a>äº‹ä»¶é˜Ÿåˆ—</h5>
      <p>åœ¨è®²è¿° setTimeout/setInterval åŸç†çš„æ—¶å€™ä¹Ÿæš´éœ²äº†äº‹ä»¶é˜Ÿåˆ—çš„ä¸€ä¸ªç¼ºé™·ï¼šäº‹ä»¶é˜Ÿåˆ—æŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„é¡ºåºæ‰§è¡Œï¼Œé‚£ä¹ˆå¦‚æœé˜Ÿåˆ—è¾ƒé•¿æ—¶ï¼Œæ’åœ¨åé¢çš„äº‹ä»¶å³ä½¿è¾ƒä¸ºâ€œç´§æ€¥â€ï¼Œä¹Ÿå¾—éœ€è¦ç­‰å¾…å‰é¢çš„ä»»åŠ¡å…ˆæ‰§è¡Œå®Œæˆã€‚JavaScript è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å°±æ˜¯ï¼šè®¾ç½®å¤šä¸ªé˜Ÿåˆ—ï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§æ¥æ‰§è¡Œã€‚<br>ä¸‹é¢è¿™æ®µä»£ç å¯ä»¥éªŒè¯ JavaScript å†…éƒ¨æ‹¥æœ‰ä¼˜å…ˆçº§ä¸åŒçš„ 2 ä¸ªé˜Ÿåˆ—ï¼Œæˆ‘ä»¬æš‚æ—¶ç§°ä¸ºçº¢è‰²é˜Ÿåˆ—å’Œç»¿è‰²é˜Ÿåˆ—ï¼Œå…¶ä¸­çº¢è‰²é˜Ÿåˆ—ä¼˜å…ˆçº§é«˜äºç»¿è‰²é˜Ÿåˆ—ã€‚è¿™æ®µä»£ç å®šä¹‰äº† 4 ä¸ªå¼‚æ­¥å‡½æ•° f1ã€f2ã€f3ã€f4ï¼Œå…¶ä¸­ï¼šå‡½æ•° f1 é€šè¿‡å®šæ—¶å™¨ setTimeout å‘ç»¿è‰²é˜Ÿåˆ—ä¸­æ’å…¥ä¸€ä¸ªæ§åˆ¶å°æ‰“å°ä»»åŠ¡ï¼Œè¾“å‡ºæ•°å­— 1ï¼›å‡½æ•° f2 é€šè¿‡ Promise å‘çº¢è‰²é˜Ÿåˆ—ä¸­æ’å…¥ä¸€ä¸ªæ§åˆ¶å°æ‰“å°ä»»åŠ¡ï¼Œè¾“å‡ºæ•°å­— 2ï¼›å‡½æ•° f3 é€šè¿‡å®šæ—¶å™¨ setTimeout å‘ç»¿è‰²é˜Ÿåˆ—ä¸­æ’å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°ä¼šè°ƒç”¨æ§åˆ¶å°æ‰“å°æ•°å­— 3ï¼Œå¹¶ä¸”è°ƒç”¨å‡½æ•° f2ï¼›å‡½æ•° f4 é€šè¿‡ Promise å‘çº¢è‰²é˜Ÿåˆ—ä¸­æ’å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°ä¼šè°ƒç”¨æ§åˆ¶å°æ‰“å°æ•°å­— 4ï¼Œå¹¶ä¸”è°ƒç”¨å‡½æ•° f1ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">Â  setTimeout(<span class="built_in">console</span>.log.bind(<span class="literal">null</span>,<span class="number">1</span>), <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">Â  <span class="built_in">Promise</span>.resolve().then(<span class="built_in">console</span>.log.bind(<span class="literal">null</span>,<span class="number">2</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">Â  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">Â  Â  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">Â  Â  f2()</span><br><span class="line">Â  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f4</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">Â  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">Â  Â  <span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line">Â  Â  f1()</span><br><span class="line">Â  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">f3()</span><br><span class="line">f4()</span><br></pre></td></tr></table></div></figure>
<p>å½“è°ƒç”¨å‡½æ•° f3 å’Œå‡½æ•° f4 ä¹‹åï¼Œç»¿è‰²é˜Ÿåˆ—å’Œçº¢è‰²é˜Ÿåˆ—éƒ½ä¼šè¢«æ’å…¥ä¸€ä¸ªåŒ¿åå›è°ƒå‡½æ•°ã€‚ç¬¬ 1 æ¬¡ tickï¼Œç”±äºçº¢è‰²é˜Ÿåˆ—ä¼˜å…ˆçº§é«˜ï¼Œæ‰€ä»¥å…ˆæ‰§è¡Œçº¢è‰²åŒ¿åå‡½æ•°ï¼Œæ§åˆ¶å°æ‰“å°æ•°å­— 4ï¼Œç„¶åè°ƒç”¨å‡½æ•° f1ï¼Œå‘ç»¿è‰²é˜Ÿåˆ—ä¸­æ’å…¥ä¸€ä¸ªæ‰“å°å‡½æ•°ï¼›ç¬¬ 2 æ¬¡ tickï¼ŒæŒ‰ç…§å…ˆè¿›å…ˆå‡ºåŸåˆ™ï¼Œæ­¤æ—¶è°ƒç”¨åŒ¿åå‡½æ•°æ‰“å°æ•°å­— 3ï¼Œå¹¶è°ƒç”¨å‡½æ•° f2ï¼Œå‘çº¢è‰²é˜Ÿåˆ—ä¸­æ’å…¥ä¸€ä¸ªæ‰“å°å‡½æ•°ï¼›ç¬¬ 3 æ¬¡ tickï¼Œè°ƒç”¨çº¢è‰²é˜Ÿåˆ—ä¸­çš„æ‰“å°å‡½æ•°ï¼Œæ§åˆ¶å°æ‰“å°æ•°å­— 2ï¼›ç¬¬ 4 æ¬¡ tickï¼Œè°ƒç”¨ç»¿è‰²é˜Ÿåˆ—ä¸­çš„æ‰“å°å‡½æ•°ï¼Œæ§åˆ¶å°æ‰“å°æ•°å­— 1ã€‚<br>å…³äºçº¢è‰²é˜Ÿåˆ—å’Œç»¿è‰²é˜Ÿåˆ—ï¼Œä¸€èˆ¬ç§°ä¸ºâ€œå®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMacro Task Queueï¼‰â€å’Œâ€œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicro Task Queueï¼‰â€ï¼Œä¸åŒé˜Ÿåˆ—ä¼˜å…ˆçº§ä¸åŒï¼Œæ¯æ¬¡äº‹ä»¶å¾ªç¯æ—¶ä¼šä»ä¼˜å…ˆçº§é«˜çš„é˜Ÿåˆ—ä¸­è·å–äº‹ä»¶ï¼Œåªæœ‰å½“ä¼˜å…ˆçº§é«˜çš„é˜Ÿåˆ—ä¸ºç©ºæ—¶æ‰ä¼šä»ä¼˜å…ˆçº§ä½çš„é˜Ÿåˆ—ä¸­è·å–äº‹ä»¶ï¼ŒåŒçº§é˜Ÿåˆ—ä¹‹é—´çš„äº‹ä»¶ä¸å­˜åœ¨ä¼˜å…ˆçº§ï¼Œåªéµå¾ªå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ã€‚</p>
<p>å¸¸è§çš„å¼‚æ­¥å‡½æ•°ä¼˜å…ˆçº§å¦‚ä¸‹ï¼Œä»ä¸Šåˆ°ä¸‹ä¼˜å…ˆçº§é€å±‚é™ä½ï¼š</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">process.nextTick(Node.js) &gt; </span><br><span class="line">MutationObserver(æµè§ˆå™¨)/promise.then(<span class="keyword">catch</span>ã€finnally)&gt;</span><br><span class="line">setImmediate(IE) &gt; </span><br><span class="line">setTimeout/setIntervalrequestAnimationFrame &gt;</span><br><span class="line">å…¶ä»– I/O æ“ä½œ / æµè§ˆå™¨ DOM äº‹ä»¶</span><br></pre></td></tr></table></div></figure>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/03/27/JSX%E5%A6%82%E4%BD%95%E5%8F%98%E6%88%90DOM/">JSXå¦‚ä½•å˜æˆDOM</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-03-27</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>å…¥é—¨Reactçš„æ—¶å€™ï¼Œæˆ‘ä»¬äº†è§£äº†ç¥å¥‡çš„JSXè¯­æ³•ï¼Œå½“æ—¶çš„å®˜æ–¹æ˜¯å»ºè®®ä½¿ç”¨JSXï¼Œä½œä¸ºå°ç™½çš„æˆ‘å½“ç„¶æ˜¯ä¹–ä¹–å¬è¯ã€‚æƒ³å¿…ç°åœ¨å¤§å®¶éƒ½æ—©å·²ç»ä¹ æƒ¯ä½¿ç”¨JSXï¼Œæˆ‘ä»¬ä»Šå¤©æ¥äº†è§£ä¸€ä¸‹å®ƒæ˜¯å¦‚ä½•æˆä¸ºDOMçš„ã€‚</p>

        <h2 id="JSXçš„æœ¬è´¨"   >
          <a href="#JSXçš„æœ¬è´¨" class="heading-link"><i class="fas fa-link"></i></a>JSXçš„æœ¬è´¨</h2>
      <p>å®˜æ–¹æè¿°JSXæ˜¯JavaScriptçš„æ‰©å±•è¯­æ³•ï¼Œå®ƒå……åˆ†å…·å¤‡JavaScriptçš„èƒ½åŠ›ï¼Œé‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ã€‚è¿™æ—¶å€™æˆ‘èƒ½æƒ³åˆ°çš„å°±æ˜¯å®˜æ–¹éœ¸éœ¸ç»™å‡ºçš„ä¸€å¥è¯ï¼ŒJSXä¼šè¢«ç¼–è¯‘æˆReact.createElement(),å®ƒä¼šè¿”å›ä¸€ä¸ªå«åšâ€™React Elementâ€™çš„JSå¯¹è±¡ã€‚é¦–å…ˆç¼–è¯‘è¿™ä¸ªåŠ¨ä½œï¼Œå®ƒæ˜¯ç”±Babelæ¥å®Œæˆçš„ï¼Œæˆ‘ä»¬çŸ¥é“Babelçš„ä¸»è¦åŠŸèƒ½æ˜¯å°†ECMAScript2015+ç‰ˆæœ¬çš„ä»£ç è½¬æ¢æˆå‘åå…¼å®¹çš„JavaScriptè¯­æ³•ï¼Œä»è€Œèƒ½è¿è¡Œåœ¨å½“å‰çš„æµè§ˆå™¨ä¸­ã€‚å…¶å®ï¼ŒJSXä¹Ÿæ˜¯ç”±Babelæ¥è½¬æ¢ä¸ºJavascriptä»£ç çš„ã€‚<br><img src='/images/Babelè½¬æ¢JSX.png'></p>
<p>æˆ‘éšä¾¿æ‰¾äº†ä¸€æ®µé¡¹ç›®é‡Œçš„ç®€å•ç»„ä»¶çš„JSXä»£ç æ”¾åœ¨Babelå®˜ç½‘ä¸Šï¼Œå®ƒä¼šå°†å…¶è½¬æ¢æˆReact.createElementçš„è°ƒç”¨ã€‚å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰çš„JSXæ ‡ç­¾éƒ½è¢«è½¬æ¢æˆäº†React.createElementè°ƒç”¨ï¼Œå¤§å®¶æ˜æ˜¾èƒ½æ„Ÿå—åˆ°ï¼ŒJSXç›¸å¯¹è€Œè¨€ä¸ä»…é˜…è¯»èµ·æ¥å‹å¥½ï¼Œå¼€å‘èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ï¼ˆ2333è¿™ä¸ªæ¯”è¾ƒå…³é”®ï¼‰ã€‚å°ç»“ä¸€ä¸‹ï¼ŒJSXæœ¬è´¨æ˜¯React.createElementè¿™ä¸ªJavaScriptè°ƒç”¨çš„è¯­æ³•ç³–ï¼Œå®ƒå…è®¸å¼€å‘è€…ç”¨è¾ƒç†Ÿæ‚‰çš„ç±»HTMLæ ‡ç­¾è¯­æ³•æ¥åˆ›å»ºè™šæ‹ŸDOMï¼Œæå‡äº†å¼€å‘æ•ˆç‡ï¼Œä¹Ÿé™ä½äº†å­¦ä¹ æˆæœ¬ã€‚</p>

        <h2 id="è¯»ä¸€è¯»createElementæºç "   >
          <a href="#è¯»ä¸€è¯»createElementæºç " class="heading-link"><i class="fas fa-link"></i></a>è¯»ä¸€è¯»createElementæºç </h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">type, config, children</span>)</span></span><br></pre></td></tr></table></div></figure>
<p>è¿™ä¸ªæ–¹æ³•æœ‰ä¸‰ä¸ªå…¥å‚ï¼Œtypeæ˜¯èŠ‚ç‚¹ç±»å‹ï¼Œå¯ä»¥æ˜¯divã€spanè¿™æ ·çš„æ ‡å‡†HTMLæ ‡ç­¾å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯Reactç»„ä»¶ç±»å‹ï¼›configæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨äº†ç»„ä»¶çš„å±æ€§ï¼›childrenè®°å½•çš„æ˜¯å­èŠ‚ç‚¹ã€å­å…ƒç´ å¯¹è±¡ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//propNameç”¨äºå­˜å‚¨å…ƒç´ å±æ€§ï¼Œpropsç”¨äºå­˜å‚¨å±æ€§çš„é”®å€¼å¯¹é›†åˆ</span></span><br><span class="line"><span class="keyword">let</span> propName;</span><br><span class="line"><span class="keyword">const</span> props = &#123; &#125;;</span><br><span class="line"><span class="keyword">let</span> key = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> ref = <span class="literal">null</span>; </span><br><span class="line"><span class="keyword">let</span> self = <span class="literal">null</span>; </span><br><span class="line"><span class="keyword">let</span> source = <span class="literal">null</span>; </span><br><span class="line"><span class="comment">// keyã€refã€selfã€source å‡ä¸º React å…ƒç´ çš„å±æ€§</span></span><br><span class="line"><span class="keyword">if</span> (hasValidRef(config)) &#123;</span><br><span class="line">  ref = config.ref;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (hasValidKey(config)) &#123;</span><br><span class="line">  key = <span class="string">''</span> + config.key; </span><br><span class="line">&#125;</span><br><span class="line">self = config.__self === <span class="literal">undefined</span> ? <span class="literal">null</span> : config.__self;</span><br><span class="line">source = config.__source === <span class="literal">undefined</span> ? <span class="literal">null</span> : config.__source;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¥ä¸‹æ¥å°†ç¬¦åˆçš„configé‡Œçš„å±æ€§æ”¾å…¥propsä¸­</span></span><br><span class="line"><span class="keyword">for</span> (propsName <span class="keyword">in</span> config) &#123;</span><br><span class="line">  <span class="keyword">if</span> (hasOwnProperty.call(config, propName) &amp;&amp; !RESERVED_PROPS.hasOwnProperty(propName)) &#123;</span><br><span class="line">    props[propName] = config[propName];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//childrenLengthæ˜¯åœ¨è·å–å­å…ƒç´ ï¼Œå› æ­¤å‡å»çš„ä¸¤é¡¹æ˜¯æŒ‡typeå’Œconfigä¸¤ä¸ªå‚æ•°å ç”¨çš„é•¿åº¦</span></span><br><span class="line"><span class="keyword">const</span> childrenLength = <span class="built_in">arguments</span>.length - <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> (childrenLength === <span class="number">1</span>) &#123; </span><br><span class="line">    props.children = children; </span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (childrenLength &gt; <span class="number">1</span>) &#123; </span><br><span class="line">  <span class="comment">//å¤„ç†å¤šä¸ªå­å…ƒç´ </span></span><br><span class="line">  <span class="keyword">const</span> childArray = <span class="built_in">Array</span>(childrenLength); </span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; childrenLength; i++) &#123; </span><br><span class="line">    childArray[i] = <span class="built_in">arguments</span>[i + <span class="number">2</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//å°†childrenèµ‹å€¼ç»™propsçš„childrenå±æ€§</span></span><br><span class="line">  props.children = childArray; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ«å¿˜äº†å¤„ç†èŠ‚ç‚¹çš„é»˜è®¤å±æ€§</span></span><br><span class="line"><span class="keyword">if</span> (type &amp;&amp; type.defaultProps) &#123;</span><br><span class="line">  <span class="keyword">const</span> defaultProps = type.defaultProps;</span><br><span class="line">  <span class="keyword">for</span> (propName <span class="keyword">in</span> defaultProps) &#123; </span><br><span class="line">    <span class="keyword">if</span> (props[propName] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      props[propName] = defaultProps[propName];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æœ€åè¿”å›è°ƒç”¨ReactElementæ‰§è¡Œæ–¹æ³•ï¼Œä¼ å…¥å¤„ç†åçš„å‚æ•°</span></span><br><span class="line"><span class="keyword">return</span> ReactElement(</span><br><span class="line">  type,</span><br><span class="line">  key,</span><br><span class="line">  ref,</span><br><span class="line">  self,</span><br><span class="line">  source,</span><br><span class="line">  ReactCurrentOwner.current,</span><br><span class="line">  props,</span><br><span class="line">);</span><br></pre></td></tr></table></div></figure>
<p>çœ‹å®Œå¤§å®¶ä¼šä¸ä¼šæœ‰äº›å¤±æœ›ï¼ŒåŸæ¥createElementå¥½åƒä¹Ÿæ²¡åšå•¥å“ˆå“ˆå“ˆï¼Œå®ƒå¹¶æ²¡æœ‰æ¶‰åŠåˆ°çœŸå®çš„DOMã€‚å…¶å®å®ƒåªæ˜¯æ¥å—ç›¸å¯¹ç®€å•çš„å‚æ•°ç„¶ååšä¸€æ¬¡æ•°æ®å¤„ç†ï¼Œæœ€åè°ƒç”¨ReactElementæ¥åˆ›å»ºå…ƒç´ ã€‚é‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥ç»§ç»­åº·åº·ReactElementçš„æºç ã€‚</p>

        <h2 id="è¯»ä¸€è¯»ReactElementæºç -è®¤è¯†ä¸€ä¸‹è™šæ‹ŸDOM"   >
          <a href="#è¯»ä¸€è¯»ReactElementæºç -è®¤è¯†ä¸€ä¸‹è™šæ‹ŸDOM" class="heading-link"><i class="fas fa-link"></i></a>è¯»ä¸€è¯»ReactElementæºç ,è®¤è¯†ä¸€ä¸‹è™šæ‹ŸDOM</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡React.createElementä¸­è°ƒç”¨ReactElementæ–¹æ³•æˆ‘ä»¬èƒ½å¾—çŸ¥ReactElementçš„å…¥å‚æœ‰å“ªäº›</span></span><br><span class="line"><span class="keyword">const</span> ReactElement = <span class="function"><span class="keyword">function</span>(<span class="params">type, key, ref, self, source, owner, props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> element = &#123;</span><br><span class="line">    <span class="comment">// REACT_ELEMENT_TYPEæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œç”¨æ¥æ ‡è¯†è¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªReactElement</span></span><br><span class="line">    $$<span class="keyword">typeof</span>: REACT_ELEMENT_TYPE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å†…ç½®å±æ€§èµ‹å€¼</span></span><br><span class="line">    type: type,</span><br><span class="line">    key: key,</span><br><span class="line">    ref: ref,</span><br><span class="line">    props: props,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®°å½•åˆ›é€ è¯¥å…ƒç´ çš„ç»„ä»¶</span></span><br><span class="line">    _owner: owner,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// </span></span><br><span class="line">  <span class="keyword">if</span> (__DEV__) &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œæ˜¯ä¸€äº›é’ˆå¯¹ __DEV__ ç¯å¢ƒä¸‹çš„å¤„ç†ï¼Œä¸å½±å“ç†è§£ä¸»è¦é€»è¾‘</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> element;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>
<p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒReactElementçš„é€»è¾‘ä¹Ÿè¾ƒä¸ºç®€å•ï¼Œå®ƒåªæ˜¯æŒ‰ä¸€å®šè§„èŒƒç»„è£…äº†ä¸€ä¸ªelementå¯¹è±¡ï¼Œé€šè¿‡React.createElementæœ€ç»ˆè¿”å›åˆ°äº†å¼€å‘è€…ã€‚æˆ‘ä»¬å¹³å¸¸å»æ‰“å°ä¸€ä¸ªReactå…ƒç´ ï¼Œå°±ä¼šå‘ç°å®ƒæ˜¯ä¸€ä¸ªæ ‡å‡†çš„ReactElementå¯¹è±¡å®ä¾‹ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚<br><img src='/images/ReactElementå…ƒç´ .png'></p>
<p>è¿™ä¸ª ReactElement å¯¹è±¡å®ä¾‹ï¼Œæœ¬è´¨ä¸Šæ˜¯ä»¥ JavaScript å¯¹è±¡å½¢å¼å­˜åœ¨çš„å¯¹ DOM çš„æè¿°ï¼Œä¹Ÿå°±æ˜¯å¤§å®¶å¸¸è¯´çš„è™šæ‹ŸDomã€‚æ—¢ç„¶æ˜¯è™šæ‹Ÿçš„ï¼Œé‚£å®ƒç¦»é¡µé¢çš„çœŸå®DOMè¿˜æœ‰ä¸€å®šè·ç¦»ï¼Œæœ€ç»ˆæ˜¯ç”±ReactDom.renderæ–¹æ³•æ¥å¡«è¡¥çš„ã€‚è¿™ä¸ªæ–¹æ³•å¯ä»¥ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œéœ€è¦æ¸²æŸ“çš„å…ƒç´ elementï¼Œå…ƒç´ æŒ‚è½½çš„ç›®æ ‡å®¹å™¨containerä¹Ÿå°±æ˜¯çœŸå®çš„DOMèŠ‚ç‚¹ï¼Œä»¥åŠå¯é€‰å‚æ•°å›è°ƒå‡½æ•°ã€‚</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/02/27/%E6%88%91%E7%9C%9F%E7%9A%84%E6%87%82this%E5%90%97/">æˆ‘çœŸçš„æ‡‚thiså—</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-02-27</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>ä¸Šç¯‡åšå®¢æœ‰ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°é‡Œä½¿ç”¨çš„å˜é‡nameæ˜¯å±äºå…¨å±€ä½œç”¨åŸŸä¸‹çš„ï¼Œå› ä¸ºJavaScriptçš„ä½œç”¨åŸŸæ˜¯ç”±è¯æ³•ä½œç”¨åŸŸå†³å®šçš„ï¼Œå®ƒåœ¨ä»£ç é˜¶æ®µå°±å†³å®šå¥½äº†ï¼Œè·Ÿå‡½æ•°æ˜¯æ€ä¹ˆè°ƒç”¨çš„æ²¡æœ‰å…³ç³»ã€‚ä½†æ˜¯åœ¨é¢å‘å¯¹è±¡çš„è¯­è¨€ä¸­ï¼Œåœ¨å¯¹è±¡å†…éƒ¨çš„æ–¹æ³•ä¸­ä½¿ç”¨å¯¹è±¡å†…éƒ¨çš„å±æ€§æ˜¯ä¸€ä¸ªéå¸¸æ™®éçš„éœ€æ±‚ï¼ŒJavaScriptçš„ä½œç”¨åŸŸæœºåˆ¶å´å¯¹æ­¤å¹¶ä¸æ”¯æŒï¼Œå› æ­¤æˆ‘ä»¬è¿™æ—¶å€™éœ€è¦thisæœºåˆ¶ã€‚<br>æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­åŒ…å«äº†å˜é‡ç¯å¢ƒã€è¯æ³•ç¯å¢ƒã€å¤–éƒ¨ç¯å¢ƒï¼Œè¿˜æœ‰å°±æ˜¯thisã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­éƒ½æœ‰ä¸€ä¸ªthisã€‚æˆ‘ä»¬ä¸»è¦æ¥äº†è§£å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„thiså’Œå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„thisã€‚<br>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„thisï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶å°æ‰“å°ä¸€ä¸‹ï¼Œæœ€ç»ˆè¾“å‡ºçš„æ˜¯windowå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„thisæ˜¯æŒ‡å‘windowå¯¹è±¡çš„ã€‚<br>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„thisï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨æ‰“å°thisï¼Œæ‰§è¡Œå‡½æ•°æ‰“å°çš„ä¹Ÿæ˜¯windowå¯¹è±¡ã€‚è¿™å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ç§ç¼ºé™·ï¼Œå› ä¸ºåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„thisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œå®ƒæ‰“ç ´äº†æ•°æ®çš„è¾¹ç•Œã€‚æˆ‘ä»¬å¯ä»¥è®¾è®¡JavaScriptä¸ºä¸¥æ ¼æ¨¡å¼ï¼Œè¿™æ—¶å€™thisçš„æŒ‡å‘ä¸ºæ€’defineã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥è®¾ç½®æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„thisã€‚</p>

        <h6 id="1ã€é€šè¿‡å‡½æ•°çš„callæ–¹æ³•è®¾ç½®"   >
          <a href="#1ã€é€šè¿‡å‡½æ•°çš„callæ–¹æ³•è®¾ç½®" class="heading-link"><i class="fas fa-link"></i></a>1ã€é€šè¿‡å‡½æ•°çš„callæ–¹æ³•è®¾ç½®</h6>
      <p>funA.call(objB),funAå‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘äº†objBå¯¹è±¡,bindã€applyä¹Ÿå¯ä»¥ç”¨æ¥æ”¹å˜thisæŒ‡å‘ï¼Œcallå’Œapplyçš„ä½œç”¨ä¸€æ ·ï¼Œåªæ˜¯ä¼ å‚æ–¹å¼ä¸åŒã€‚callå’Œapplyéƒ½ä¼šæ‰§è¡Œå¯¹åº”çš„å‡½æ•°ï¼Œè€Œbindæ–¹æ³•ä¸ä¼šã€‚</p>

        <h5 id="2ã€é€šè¿‡å¯¹è±¡è°ƒç”¨æ–¹æ³•æ¥è®¾ç½®"   >
          <a href="#2ã€é€šè¿‡å¯¹è±¡è°ƒç”¨æ–¹æ³•æ¥è®¾ç½®" class="heading-link"><i class="fas fa-link"></i></a>2ã€é€šè¿‡å¯¹è±¡è°ƒç”¨æ–¹æ³•æ¥è®¾ç½®</h5>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> objA = &#123;</span><br><span class="line">  name: <span class="string">'able'</span>,</span><br><span class="line">  printName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">objA.printName();</span><br></pre></td></tr></table></div></figure>
<p>å½“ä½¿ç”¨å¯¹è±¡æ¥è°ƒç”¨èµ·å†…éƒ¨çš„ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¯¥æ–¹æ³•çš„thisæ˜¯æŒ‡å‘å¯¹è±¡æœ¬èº«çš„ã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºåœ¨æ‰§è¡Œæ—¶å°†å…¶è½¬åŒ–æˆäº†objA.printName.call(objA);<br>è¦æ³¨æ„çš„æ˜¯ï¼Œéšå¼ç»‘å®šæœ‰ä¸€ä¸ªå¤§å‘ï¼Œå®ƒå®¹æ˜“ä¸¢å¤±ï¼å¦‚æœæˆ‘ä»¬æŠŠobjA.printNameèµ‹ç»™ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œç„¶ååœ¨å…¨å±€ç¯å¢ƒä¸­è°ƒç”¨è¿™ä¸ªå¯¹è±¡ï¼Œå®ƒå†…éƒ¨çš„thisæ˜¯æŒ‡å‘å…¨å±€å˜é‡windowçš„ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå°è¯€çªæ¥è®°ä½ï¼Œéšå¼è°ƒç”¨çš„æ ¼å¼ä¸€èˆ¬æ˜¯XXX.fn();fn()å‰è¾¹å¦‚æœä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œé‚£å®ƒä¸æ˜¯éšå¼ç»‘å®šã€‚</p>

        <h5 id="3ã€é€šè¿‡æ„é€ å‡½æ•°ä¸­è®¾ç½®"   >
          <a href="#3ã€é€šè¿‡æ„é€ å‡½æ•°ä¸­è®¾ç½®" class="heading-link"><i class="fas fa-link"></i></a>3ã€é€šè¿‡æ„é€ å‡½æ•°ä¸­è®¾ç½®</h5>
      <p>åœ¨JavaScriptä¸­ï¼Œæ„é€ å‡½å¯¹è±¡æ•°åªæ˜¯ä½¿ç”¨newæ—¶è¢«è°ƒç”¨çš„å‡½æ•°ï¼Œå®ƒè·ŸC++ä¸ä¸€æ ·ï¼Œæ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œå› æ­¤ä»»ä½•ä¸€ä¸ªå‡½æ•°éƒ½å¯ä»¥ç”¨newæ¥è°ƒç”¨ï¼Œå®ƒä¸å±äºæŸä¸ªç±»ï¼Œä¹Ÿä¸ä¼šå®ä¾‹åŒ–å‡ºä¸€ä¸ªç±»ï¼Œåªèƒ½ç§°ä½œæ˜¯å¯¹äºå‡½æ•°çš„æ„é€ è°ƒç”¨ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createA</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> objA = <span class="keyword">new</span> createA (<span class="string">'able'</span>);</span><br></pre></td></tr></table></div></figure>
<p>å½“æ‰§è¡Œnew createA()æˆ‘ä»¬å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡objAï¼Œè°ƒç”¨createA.callæ–¹æ³•ï¼Œå°†objAä½œä¸ºå‚æ•°ï¼ŒcreateAçš„æ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºæ—¶ï¼Œå®ƒçš„thisæŒ‡å‘æ¥objAå¯¹è±¡ã€‚ç„¶åæ‰§è¡ŒcreateAå‡½æ•°ï¼Œæ­¤æ—¶createAå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„thisæŒ‡å‘objAå¯¹è±¡ï¼Œæœ€åè¿”å›objAå¯¹è±¡ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> objA  = &#123; &#125;;</span><br><span class="line">createA.call(objA);</span><br><span class="line"><span class="keyword">return</span> objA;</span><br></pre></td></tr></table></div></figure>
<p>è¿™æ ·æˆ‘ä»¬ç”¨newæ„å»ºæ¥ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå°±ä¼šå°†æ–°å¯¹è±¡ç»‘å®šåˆ°è¿™ä¸ªå‡½æ•°çš„thisä¸Šã€‚</p>

        <h2 id="ç»‘å®šä¼˜å…ˆçº§"   >
          <a href="#ç»‘å®šä¼˜å…ˆçº§" class="heading-link"><i class="fas fa-link"></i></a>ç»‘å®šä¼˜å…ˆçº§</h2>
      <p>ä¸Šè¾¹æœ‰åˆ—åˆ°å¥½å‡ ç§ç»‘å®šè§„åˆ™ï¼Œnewç»‘å®šï¼Œé€šè¿‡callã€applyã€bindæ–¹å¼çš„æ˜¾å¼ç»‘å®šï¼Œåœ¨æŸä¸ªå¯¹è±¡ä¸Šè§¦å‘å‡½æ•°è°ƒç”¨çš„éšå¼ç»‘å®šï¼Œè¿˜æœ‰é»˜è®¤ç»‘å®šã€‚å®ƒä»¬çš„ä¼˜å…ˆçº§ä¸º:<br>newç»‘å®š &gt; æ˜¾å¼ç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®š</p>

        <h2 id="thisçš„ä¸€äº›å‘"   >
          <a href="#thisçš„ä¸€äº›å‘" class="heading-link"><i class="fas fa-link"></i></a>thisçš„ä¸€äº›å‘</h2>
      <p>åµŒå¥—å‡½æ•°çš„thisä¸ä¼šä»å¤–å±‚å‡½æ•°ç»§æ‰¿ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> objA = &#123;</span><br><span class="line">  name: <span class="string">'able'</span>,</span><br><span class="line">  printThis: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">innerB</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  innerB();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">objA.printThis();</span><br></pre></td></tr></table></div></figure>
<p>è¿™ä¸ªå†…éƒ¨å‡½æ•°innerBä¸­çš„thisï¼Œå¾ˆå®¹æ˜“è¢«ç†è§£ä¸ºå’Œå…¶å¤–å±‚printThiså‡½æ•°çš„thisæ˜¯ä¸€è‡´çš„ã€‚ä½†æ‰§è¡Œåæˆ‘ä»¬ä¼šå‘ç°ï¼ŒinnerBä¸­çš„thisæŒ‡å‘çš„æ˜¯å…¨å±€windowå¯¹è±¡ï¼Œè®©äººè¿·æƒ‘ã€‚<br>æ—©æœŸå¤§å®¶å¯èƒ½ä¼šåœ¨å¼€å‘çš„æ—¶å€™åœ¨printThiså‡½æ•°ä¸­å£°æ˜ä¸€ä¸ª_thisæ¥ä¿å­˜thisï¼Œç„¶ååœ¨innerBå‡½æ•°ä¸­ä½¿ç”¨_thisã€‚å½“æœ‰äº†ç®­å¤´å‡½æ•°ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ç®­å¤´å‡½æ•°çš„ç‰¹æ€§æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å› ä¸ºç®­å¤´å‡½æ•°ä¸ä¼šåˆ›å»ºå…¶è‡ªèº«çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå®ƒçš„thiså–å†³äºå®ƒçš„å¤–éƒ¨å‡½æ•°ã€‚å…³äºç®­å¤´å‡½æ•°è¿˜æœ‰å‡ ç‚¹æˆ‘ä»¬éœ€è¦æ³¨æ„çš„ï¼Œå®ƒä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œä¸å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡ï¼Œæ²¡æœ‰è‡ªå·±çš„thiså› æ­¤ä¸èƒ½ç”¨call()ç­‰æ–¹æ³•æ”¹å˜thisæŒ‡å‘ã€‚</p>

        <h2 id="æ€»ç»“"   >
          <a href="#æ€»ç»“" class="heading-link"><i class="fas fa-link"></i></a>æ€»ç»“</h2>
      <p>åˆ¤æ–­thisæŒ‡å‘æµç¨‹èµ°ä¸€éï¼šé¦–å…ˆæˆ‘ä»¬çœ‹å‡½æ•°æ˜¯å¦åœ¨newä¸­è°ƒç”¨ï¼›ç„¶åæ˜¯çœ‹å‡½æ•°æ˜¯å¦é€šè¿‡call,applyè°ƒç”¨ï¼Œæˆ–è€…ä½¿ç”¨äº†bind(å³ç¡¬ç»‘å®š);ã€æ¥ä¸‹æ¥çœ‹å‡½æ•°æ˜¯å¦åœ¨æŸä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è°ƒç”¨(éšå¼ç»‘å®š)ï¼›å¦‚æœä»¥ä¸Šéƒ½ä¸æ˜¯ï¼Œé‚£ä¹ˆä½¿ç”¨é»˜è®¤ç»‘å®šã€‚å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ™ç»‘å®šåˆ°undefinedï¼Œå¦åˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ã€‚è¦æ³¨æ„çš„æ˜¯å¦‚æœæŠŠnullæˆ–è€…undefinedä½œä¸ºthisçš„ç»‘å®šå¯¹è±¡ä¼ å…¥callã€applyæˆ–è€…bindï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™ã€‚è¿˜æœ‰å¦‚æœæ˜¯ç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°çš„thisç»§æ‰¿çš„æ˜¯å¤–å±‚ä»£ç å—çš„thisã€‚</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/01/23/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE%E5%92%8C%E9%97%AD%E5%8C%85/">ä½œç”¨åŸŸé“¾å’Œé—­åŒ…</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-01-23</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>ä¸Šä¸ªåšå®¢äº†è§£äº†å¦‚ä½•é€šè¿‡è¯æ³•ç¯å¢ƒå’Œå˜é‡ç¯å¢ƒæ¥æŸ¥æ‰¾å˜é‡ï¼Œè¿™å…¶ä¸­å°±æ¶‰åŠåˆ°ä½œç”¨åŸŸé“¾äº†ï¼ŒæŠ½è±¡çš„æ¦‚å¿µä¸å¦‚æ¥æ®µä»£ç ï¼Œæ¥ï¼Œä¸Šæ¿æ —ğŸŒ°ã€‚</p>

        <h2 id="ä½œç”¨åŸŸé“¾"   >
          <a href="#ä½œç”¨åŸŸé“¾" class="heading-link"><i class="fas fa-link"></i></a>ä½œç”¨åŸŸé“¾</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'zunxingdaming'</span>, name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">'able'</span>;</span><br><span class="line">  printName();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'moriatry'</span>;</span><br><span class="line">main();</span><br></pre></td></tr></table></div></figure>
<p>é‚£ä¹ˆmainå‡½æ•°æ‰§è¡Œçš„ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå½“æ‰§è¡Œåˆ°printNameå‡½æ•°å†…éƒ¨æ—¶ï¼Œnameçš„å€¼åˆ°åº•åˆ°åº•æ˜¯ä»å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡è¿˜æ˜¯mainå‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­å–å‘¢ï¼Ÿå¯èƒ½å®¹æ˜“æŒ‰ç…§è°ƒç”¨æ ˆçš„é¡ºåºæ¥æŸ¥æ‰¾å˜é‡ï¼Œæ‰§è¡Œåˆ°printNameå‡½æ•°å†…éƒ¨æ—¶ï¼Œä»æ ˆé¡¶åˆ°åº•ä¾æ¬¡ä¸ºprintNameå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ã€mainå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ã€å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¦‚æœæ˜¯è¿™æ ·è¾“å‡ºç»“æœåº”è¯¥æ˜¯ableï¼Œä½†å®é™…ä¸Šä¸æ˜¯è¿™æ ·ï¼Œè¿™æ˜¯ä¸ºç”šå‘¢ï¼Œè®©æˆ‘ä»¬è¿›å…¥ä½œç”¨åŸŸé“¾çš„ä¸–ç•Œæ¢ç©¶æ¢ç©¶ã€‚<br>åœ¨æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡ç¯å¢ƒé‡Œéƒ½æœ‰ä¸€ä¸ªå¤–éƒ¨å¼•ç”¨ï¼ŒæŒ‡å‘å¤–éƒ¨çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¯ç§°å…¶ä¸ºouterã€‚ä¸€æ®µä»£ç ä¸­ä½¿ç”¨ä¸€ä¸ªå˜é‡æ—¶ï¼Œjså¼•æ“ä¼šå…ˆåœ¨å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾è¯¥å˜é‡ï¼Œç„¶åä¼šç»§ç»­åœ¨outeræŒ‡å‘çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ã€‚printNameå‡½æ•°å’Œmainå‡½æ•°çš„outeréƒ½æ˜¯æŒ‡å‘å…¨å±€ä¸Šä¸‹æ–‡ï¼Œé‚£ä¹ˆä¸Šé¢çš„æ —å­åœ¨printNameå‡½æ•°ä¸­è¦è¾“å‡ºnameå˜é‡ï¼Œåˆ™ä¼šå–outeræŒ‡å‘çš„å…¨å±€ä½œç”¨åŸŸä¸­å¯»æ‰¾ï¼Œè¿™ç§æŸ¥æ‰¾æ–¹å¼å³ä¸ºé“¾ã€‚<br>å¯èƒ½çœ‹åˆ°è¿™é‡Œè¿˜ä¼šæœ‰ä¸€äº›ç–‘é—®ï¼ŒprintNameå‡½æ•°æ˜¯mainå‡½æ•°è°ƒç”¨çš„ï¼Œä¸ºå•¥å…¶outerä¸æ˜¯æŒ‡å‘mainå‡½æ•°å‘¢ã€‚è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªæ¦‚å¿µè¯æ³•ä½œç”¨åŸŸï¼Œåœ¨jsçš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä½œç”¨åŸŸé“¾æ˜¯ç”±è¯æ³•ä½œç”¨åŸŸæ¥å†³å®šçš„ã€‚è¯æ³•ä½œç”¨åŸŸå‘¢è¡¨ç¤ºä½œç”¨åŸŸæ˜¯ç”±ä»£ç ä¸­å‡½æ•°å£°æ˜çš„ä½ç½®æ¥å†³å®šçš„ï¼Œæ‰€ä»¥è¯´å®ƒæ˜¯é™æ€çš„ï¼Œæ˜¯åœ¨ä»£ç é˜¶æ®µå°±å®šä¸‹æ¥äº†ï¼Œè·Ÿå‡½æ•°æ˜¯æ€ä¹ˆäº’ç›¸è°ƒç”¨çš„æ²¡æœ‰å…³ç³»ã€‚</p>

        <h2 id="é—­åŒ…"   >
          <a href="#é—­åŒ…" class="heading-link"><i class="fas fa-link"></i></a>é—­åŒ…</h2>
      <p>ä¸ºäº†æ›´å¥½çš„ç†è§£é—­åŒ…ï¼Œå†ä¸¾ä¸ªæ¿æ —ğŸŒ°ã€‚</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">'able'</span>;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">var</span> innerFun = &#123;</span><br><span class="line">      getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> name;</span><br><span class="line">&#125;,</span><br><span class="line">setName: <span class="function"><span class="keyword">function</span>(<span class="params">newName</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">  name = newName;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> innerFun;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> funA = foo();</span><br><span class="line">funA.setName(<span class="string">'moriaty'</span>);</span><br><span class="line">funA.getName();</span><br><span class="line"><span class="built_in">console</span>.log(funA.getName());</span><br></pre></td></tr></table></div></figure>
<p>innerFunæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œè¾¹åŒ…å«ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¸­ç”¨åˆ°äº†aå˜é‡å’Œnameå˜é‡ã€‚æ ¹æ®è¯æ³•ä½œç”¨åŸŸï¼Œå†…éƒ¨çš„å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°fooä¸­çš„å˜é‡ã€‚æ‰€ä»¥å½“innerFunè¿”å›ç»™å…¨å±€å˜é‡funAæ—¶ï¼Œå®ƒçš„ä¸¤ä¸ªæ–¹æ³•ä»å¯ä»¥ä½¿ç”¨fooå‡½æ•°ä¸­çš„å˜é‡ã€‚<br>fooå‡½æ•°æ‰§è¡Œå®Œåï¼Œå…¶æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆé¡¶å¼¹å‡ºï¼Œä½†æ˜¯å…¶è¿”å›çš„ä¸¤ä¸ªæ–¹æ³•ä¸­ä½¿ç”¨äº†å˜é‡nameå’Œaï¼Œå› æ­¤è¿™ä¸¤ä¸ªå˜é‡ä»ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆsetNameå’ŒgetNameä¸¤ä¸ªæ–¹æ³•çš„èƒŒåŒ…ï¼Œæ— æ³•åœ¨å“ªé‡Œè°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå®ƒä»¬éƒ½ä¼šèƒŒç€è¿™ä¸ªfooå‡½æ•°çš„èƒŒåŒ…ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªèƒŒåŒ…ç§°ä¸ºfooå‡½æ•°çš„é—­åŒ…ã€‚<br>æ­¤æ—¶æ­¤åˆ»ï¼Œä¸Šä¸€ä¸ªæ¯”è¾ƒè§„èŒƒçš„é—­åŒ…å®šä¹‰å§ã€‚åœ¨jsä¸­ï¼Œæ ¹æ®è¯æ³•ä½œç”¨åŸŸçš„è§„åˆ™ï¼Œå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°ä¸­å£°æ˜çš„å˜é‡ï¼Œå½“é€šè¿‡è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨å‡½æ•°è¿”å›ä¸€ä¸ªå†…éƒ¨å‡½æ•°åï¼Œå³ä½¿è¯¥å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œç»“æŸï¼Œä½†å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°ä½†å˜é‡ä¾ç„¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæˆ‘ä»¬ç§°è¿™äº›å˜é‡çš„é›†åˆç§°ä¹‹ä¸ºå¤–éƒ¨å‡½æ•°çš„é—­åŒ…ã€‚<br>é‚£ä¹ˆå½“æ‰§è¡Œåˆ°funA.setNameæ–¹æ³•ä¸­çš„name = â€˜moriatyâ€™æ—¶ï¼Œjså¼•æ“ä¼šæ²¿ç€â€œå½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡-&gt;fooå‡½æ•°é—­åŒ…-&gt;å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡â€çš„é¡ºåºæ¥æŸ¥æ‰¾nameå˜é‡ï¼Œå¯ä»¥çœ‹ä¸‹æ­¤æ—¶çš„è°ƒç”¨æ ˆå¦‚ä¸‹å›¾ã€‚æ‰€ä»¥è°ƒç”¨setNameæ—¶ï¼Œä¼šä¿®æ”¹é—­åŒ…ä¸­nameçš„å€¼ã€‚<br><img src='/images/æ‰§è¡ŒfunAæ—¶è°ƒç”¨æ ˆ.png' width='300px' height='500px'><br>å…³äºé—­åŒ…çš„é”€æ¯ï¼Œå¦‚æœå¼•ç”¨é—­åŒ…çš„å‡½æ•°æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œé‚£é—­åŒ…ä¼šä¸€ç›´å­˜åœ¨åˆ°é¡µé¢å…³é—­ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªé—­åŒ…ä¹‹åä¸å®ç”¨çš„è¯ï¼Œä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚å¦‚æœå¼•ç”¨é—­åŒ…çš„å‡½æ•°æ˜¯ä¸ªå±€éƒ¨å˜é‡ï¼Œç­‰å‡½æ•°é”€æ¯åï¼Œä¸‹æ¬¡jså¼•æ“æ‰§è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œåˆ¤æ–­é—­åŒ…ä¸å†è¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆå†…å­˜ä¼šè¢«å›æ”¶ã€‚</p>
</div></div></article></section><nav class="paginator"><div class="paginator-inner"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-angle-right"></i></a></div></nav></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/avatar.jpeg" alt="avatar"></div><p class="sidebar-ov-author__text">è°ä¸æ˜¯ï¼Œæ‹¼äº†å‘½èµ°åˆ°ç»“å°¾ï¼Œä¹Ÿè®¸å‘å¾®ï¼Œä¸€ç”Ÿç‹¼ç‹ˆ</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">20</div><div class="sidebar-ov-state-item__name">Archives</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright Â© 2022</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>å‰ç«¯ä¸€å²å°ç™½-able.Feng</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v4.2.0</span><span class="footer__devider">|</span><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.0.0-rc.0</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.0.0-rc.0"></script><script src="/js/stun-boot.js?v=2.0.0-rc.0"></script><script src="/js/scroll.js?v=2.0.0-rc.0"></script><script src="/js/header.js?v=2.0.0-rc.0"></script><script src="/js/sidebar.js?v=2.0.0-rc.0"></script></body></html>